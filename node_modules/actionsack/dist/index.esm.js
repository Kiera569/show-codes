import n from"copy-to-clipboard";import t from"react-click-outside";import e from"react-fast-compare";import r from"react";const o=function(){function n(){}return n.prototype.then=function(t,e){const r=new n,o=this.s;if(o){const n=1&o?t:e;if(n){try{i(r,1,n(this.v))}catch(n){i(r,2,n)}return r}return this}return this.o=function(n){try{const o=n.v;1&n.s?i(r,1,t?t(o):o):e?i(r,1,e(o)):i(r,2,o)}catch(n){i(r,2,n)}},r},n}();function i(n,t,e){if(!n.s){if(e instanceof o){if(!e.s)return void(e.o=i.bind(null,n,t));1&t&&(t=e.s),e=e.v}if(e&&e.then)return void e.then(i.bind(null,n,t),i.bind(null,n,2));n.s=t,n.v=e;const r=n.o;r&&r(n)}}const u={};function c(n){var t=r.useState(null),e=t[0],o=t[1],i=r.useState(null),u=i[0],c=i[1],l=r.useState(null),a=l[0],s=l[1];return[r.useCallback(function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];try{return o(!0),c(null),Promise.resolve(function(e,r){try{var o=function(e,r){try{var o=Promise.resolve(n.apply(void 0,t)).then(function(n){return s(n),n})}catch(n){return r(n)}return o&&o.then?o.then(void 0,r):o}(0,function(n){c(n)})}catch(n){return r(!0,n)}return o&&o.then?o.then(r.bind(null,!1),r.bind(null,!0)):r(!1,value)}(0,function(n,t){if(o(!1),n)throw t;return t}))}catch(n){return Promise.reject(n)}},[n]),{data:a,loading:e,error:u}]}!function(){function n(n){this._entry=n,this._pact=null,this._resolve=null,this._return=null,this._promise=null}function t(n){return{value:n,done:!0}}function e(n){return{value:n,done:!1}}n.prototype[Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator"))]=function(){return this},n.prototype._yield=function(n){return this._resolve(n&&n.then?n.then(e):e(n)),this._pact=new o},n.prototype.next=function(n){const e=this;return e._promise=new Promise(function(r){const c=e._pact;if(null===c){const n=e._entry;if(null===n)return r(e._promise);function l(n){e._resolve(n&&n.then?n.then(t):t(n)),e._pact=null,e._resolve=null}e._entry=null,e._resolve=r,n(e).then(l,function(n){if(n===u)l(e._return);else{const t=new o;e._resolve(t),e._pact=null,e._resolve=null,_resolve(t,2,n)}})}else e._pact=null,e._resolve=r,i(c,1,n)})},n.prototype.return=function(n){const e=this;return e._promise=new Promise(function(r){const o=e._pact;if(null===o)return null===e._entry?r(e._promise):(e._entry=null,r(n&&n.then?n.then(t):t(n)));e._return=n,e._resolve=r,e._pact=null,i(o,2,u)})},n.prototype.throw=function(n){const t=this;return t._promise=new Promise(function(e,r){const o=t._pact;if(null===o)return null===t._entry?e(t._promise):(t._entry=null,r(n));t._resolve=e,t._pact=null,i(o,2,n)})}}();var l=r.memo(function(n){var t=c(n.onClick),e=t[1];return n.children({data:e.data,loading:e.loading,error:e.error,onClick:t[0]})});l.displayName="AsyncButton";var a=function(n){return new Promise(function(t){return setTimeout(t,n)})};function s(t,e){void 0===e&&(e={});var r=e.interval,o=c(function(){try{n(t);var e=function(){if(0!==r)return Promise.resolve(a(null==r?1e3:r)).then(function(){})}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(n){return Promise.reject(n)}});return{onClick:o[0],copied:o[1].loading}}var f=r.memo(function(n){return n.children(s(n.text,{interval:n.interval}))});f.displayName="CopyButton";var p=function(n,t){return r.useEffect(function(){return document.addEventListener(n,t,!1),function(){return document.removeEventListener(n,t,!1)}})},v=function(n,t){var e=r.useCallback(function(e){if(n.split("-").pop()===e.key){var r=n.toLowerCase();if((r.indexOf("⌘")>-1||r.indexOf("cmd")>-1)&&!e.metaKey)return;if((r.indexOf("⌃")>-1||r.indexOf("ctrl")>-1)&&!e.ctrlKey)return;if((r.indexOf("⇧")>-1||r.indexOf("shift")>-1)&&!e.shiftKey)return;if((r.indexOf("⌥")>-1||r.indexOf("option")>-1||r.indexOf("opt")>-1||r.indexOf("alt")>-1)&&!e.altKey)return;return t(e)}},[n,t]);p("keydown",e)},d=t(function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t,t.prototype.handleClickOutside=function(n){this.props.onClickAway(n)},t.prototype.render=function(){return this.props.children},t}(r.PureComponent)),h=r.memo(function(n){return v("Escape",n.onClickAway),r.createElement(d,{onClickAway:n.onClickAway},n.open?n.children:null)});function m(n,t){void 0===t&&(t={});var o=t.onSubmit,i=t.onReset,u=r.useState(n),l=u[0],a=u[1],s=r.useState(n),f=s[0],p=s[1],v=!r.useMemo(function(){return e(f,l)},[f,l]),d=r.useCallback(function(n){return a(n.target.value)},[a]),h=c(function(){try{function n(){p(l)}var t=function(){if(o)return Promise.resolve(o(l)).then(function(){})}();return Promise.resolve(t&&t.then?t.then(n):n())}catch(n){return Promise.reject(n)}}),m=h[1];return{value:l,hasChanged:v,data:m.data,loading:m.loading,error:m.error,onChange:a,onInputChange:d,reset:function(){i&&i(l),a(f)},submit:h[0]}}h.displayName="Modal";var y=r.memo(function(n){var t=m(n.initialValue,n);return n.children(t)});function _(){}function w(n){var t=n.showAfter,e=n.showUntil,o=r.useState(null==t),i=o[0],u=o[1];return r.useEffect(function(){if(null!=t){var n=setTimeout(u,t,!0);return function(){return clearTimeout(n)}}},[t]),r.useEffect(function(){if(null!=e){var n=setTimeout(u,e,!1);return function(){return clearTimeout(n)}}},[e]),i}function g(n){var t=n.children;return w({showAfter:n.showAfter,showUntil:n.showUntil})?t:null}y.displayName="TempValue",y.defaultProps={onReset:_,onSubmit:_};var S=function(n){return"string"==typeof n?n:JSON.stringify(n)},b=function(n){try{return JSON.parse(n)}catch(t){return n}};function C(n){var t=r.useState(null),e=t[0],o=t[1];return r.useEffect(function(){if(Object.prototype.hasOwnProperty.call(localStorage,n)){var t=localStorage.getItem(n);o(b(t))}},[n]),r.useEffect(function(){function n(n){n.isTrusted&&o(n.newValue)}return window.addEventListener("storage",n),function(){return window.removeEventListener("storage",n)}},[]),r.useEffect(function(){null==e?localStorage.removeItem(n):localStorage.setItem(n,S(e))},[n,e]),[e,o]}function E(n,t){var e=r.useRef(t);r.useEffect(function(){var t=e.current;return window.addEventListener(n,t),function(){return window.removeEventListener(n,t)}},[n])}function O(){var n=r.useState(!0),t=n[0],e=n[1];return r.useEffect(function(){e("undefined"==typeof navigator||"boolean"!=typeof navigator.onLine||navigator.onLine)},[]),E("offline",function(){return e(!1)}),E("online",function(){return e(!0)}),t}export{c as useAsyncCallback,l as AsyncButton,s as useCopyTextHandler,f as CopyButton,p as useEventListener,v as useKeyboardListener,h as Modal,m as useTempValue,y as TempValue,w as useTimeWindow,g as TimeWindow,C as useLocalStorage,O as useOnline};
//# sourceMappingURL=index.esm.js.map
