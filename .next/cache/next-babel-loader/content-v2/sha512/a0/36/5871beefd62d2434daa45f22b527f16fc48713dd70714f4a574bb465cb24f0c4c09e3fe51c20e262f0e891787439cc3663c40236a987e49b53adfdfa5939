{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/limengyu/Desktop/private/code/project/show-codes/components/BackgroundSelect.js\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport ImagePicker from './ImagePicker';\nimport ColorPicker from './ColorPicker';\nimport Button from './Button';\nimport Popout, { managePopout } from './Popout';\nimport { COLORS, DEFAULT_BG_COLOR } from '../lib/constants';\nimport { stringifyRGBA } from '../lib/util';\n\nfunction validateColor(str) {\n  if (/#\\d{3,6}|rgba{0,1}\\(.*?\\)/gi.test(str) || /\\w+/gi.test(str)) {\n    return str;\n  }\n}\n\nclass BackgroundSelect extends React.PureComponent {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"selectTab\", name => {\n      if (this.props.mode !== name) {\n        this.props.onChange({\n          backgroundMode: name\n        });\n      }\n    });\n\n    _defineProperty(this, \"handlePickColor\", ({\n      rgb\n    }) => this.props.onChange({\n      backgroundColor: stringifyRGBA(rgb)\n    }));\n  }\n\n  render() {\n    const {\n      color,\n      mode,\n      image,\n      onChange,\n      isVisible,\n      toggleVisibility,\n      carbonRef,\n      updateHighlights\n    } = this.props;\n    const background = validateColor(color) ? color : DEFAULT_BG_COLOR;\n    const aspectRatio = carbonRef ? carbonRef.clientWidth / carbonRef.clientHeight : 1;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: _JSXStyle.dynamic([[\"657095979\", [COLORS.SECONDARY, mode === 'image' ? `background: url(${image});\n                 background-size: cover;\n                 background-repeat: no-repeat;` : `background: ${background};`, COLORS.SECONDARY, COLORS.SECONDARY]]]) + \" \" + \"bg-select-container\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        title: \"Background Menu\",\n        border: true,\n        center: true,\n        selected: isVisible,\n        className: `bg-color-container bg-select-display ${isVisible ? 'is-visible' : ''}`,\n        onClick: toggleVisibility,\n        background: \"white\",\n        hoverBackground: \"white\",\n        \"data-cy\": \"display\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: _JSXStyle.dynamic([[\"657095979\", [COLORS.SECONDARY, mode === 'image' ? `background: url(${image});\n                 background-size: cover;\n                 background-repeat: no-repeat;` : `background: ${background};`, COLORS.SECONDARY, COLORS.SECONDARY]]]) + \" \" + \"bg-color-alpha\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: _JSXStyle.dynamic([[\"657095979\", [COLORS.SECONDARY, mode === 'image' ? `background: url(${image});\n                 background-size: cover;\n                 background-repeat: no-repeat;` : `background: ${background};`, COLORS.SECONDARY, COLORS.SECONDARY]]]) + \" \" + \"bg-color\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Popout, {\n        id: \"bg-select-pickers\",\n        pointerLeft: \"15px\",\n        hidden: !isVisible,\n        style: {\n          width: '222px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: _JSXStyle.dynamic([[\"657095979\", [COLORS.SECONDARY, mode === 'image' ? `background: url(${image});\n                 background-size: cover;\n                 background-repeat: no-repeat;` : `background: ${background};`, COLORS.SECONDARY, COLORS.SECONDARY]]]) + \" \" + \"picker-tabs\",\n          children: ['color', 'image'].map(tab => /*#__PURE__*/_jsxDEV(Button, {\n            padding: \"8px 0\",\n            center: true,\n            className: \"capitalize\",\n            onClick: this.selectTab.bind(null, tab),\n            background: mode === tab ? COLORS.BLACK : COLORS.DARK_GRAY,\n            children: tab\n          }, tab, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: _JSXStyle.dynamic([[\"657095979\", [COLORS.SECONDARY, mode === 'image' ? `background: url(${image});\n                 background-size: cover;\n                 background-repeat: no-repeat;` : `background: ${background};`, COLORS.SECONDARY, COLORS.SECONDARY]]]) + \" \" + \"picker-tabs-contents\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            hidden: mode !== 'color',\n            className: _JSXStyle.dynamic([[\"657095979\", [COLORS.SECONDARY, mode === 'image' ? `background: url(${image});\n                 background-size: cover;\n                 background-repeat: no-repeat;` : `background: ${background};`, COLORS.SECONDARY, COLORS.SECONDARY]]]),\n            children: /*#__PURE__*/_jsxDEV(ColorPicker, {\n              color: color,\n              onChange: this.handlePickColor\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            hidden: mode !== 'image',\n            className: _JSXStyle.dynamic([[\"657095979\", [COLORS.SECONDARY, mode === 'image' ? `background: url(${image});\n                 background-size: cover;\n                 background-repeat: no-repeat;` : `background: ${background};`, COLORS.SECONDARY, COLORS.SECONDARY]]]),\n            children: /*#__PURE__*/_jsxDEV(ImagePicker, {\n              onChange: onChange,\n              imageDataURL: image,\n              aspectRatio: aspectRatio,\n              updateHighlights: updateHighlights\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n        id: \"657095979\",\n        dynamic: [COLORS.SECONDARY, mode === 'image' ? `background: url(${image});\n                 background-size: cover;\n                 background-repeat: no-repeat;` : `background: ${background};`, COLORS.SECONDARY, COLORS.SECONDARY],\n        children: `.bg-select-container.__jsx-style-dynamic-selector{height:100%;}.bg-select-container.__jsx-style-dynamic-selector .bg-select-display{position:relative;overflow:hidden;height:100%;width:40px;border:1px solid ${COLORS.SECONDARY};}.bg-select-container.__jsx-style-dynamic-selector .bg-select-display.is-visible,.bg-select-container.__jsx-style-dynamic-selector .bg-select-display:focus{border-width:2px;}.bg-color.__jsx-style-dynamic-selector{position:absolute;top:0px;right:0px;bottom:0px;left:0px;${mode === 'image' ? `background: url(${image});\n                 background-size: cover;\n                 background-repeat: no-repeat;` : `background: ${background};`};}.bg-color-alpha.__jsx-style-dynamic-selector{position:absolute;top:0px;right:0px;bottom:0px;left:0px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==);}.picker-tabs.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-bottom:2px solid ${COLORS.SECONDARY};}.picker-tabs.__jsx-style-dynamic-selector button{border-right:1px solid ${COLORS.SECONDARY};}.picker-tabs.__jsx-style-dynamic-selector button:last-child{border-right:none;}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9saW1lbmd5dS9EZXNrdG9wL3ByaXZhdGUvY29kZS9wcm9qZWN0L3Nob3ctY29kZXMvY29tcG9uZW50cy9CYWNrZ3JvdW5kU2VsZWN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTRGVyxBQUcyQixBQUlNLEFBU0QsQUFJQyxBQVNBLEFBU0wsQUFLdUMsQUFJbEMsWUEzQ3BCLEtBYUEsQ0FUa0IsQUFhUixBQVNBLEFBa0JWLFFBMUJZLEFBU0EsUUF0QkUsRUFjRCxBQVNBLFVBdEJBLENBY0YsQUFTQSxLQVdYLElBbkI4QixBQVMySixDQXZCekksaUJBNEJPLFdBYnZELGtCQWRBLHdCQTRCQSxnSEFMQSIsImZpbGUiOiIvVXNlcnMvbGltZW5neXUvRGVza3RvcC9wcml2YXRlL2NvZGUvcHJvamVjdC9zaG93LWNvZGVzL2NvbXBvbmVudHMvQmFja2dyb3VuZFNlbGVjdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcblxuaW1wb3J0IEltYWdlUGlja2VyIGZyb20gJy4vSW1hZ2VQaWNrZXInXG5pbXBvcnQgQ29sb3JQaWNrZXIgZnJvbSAnLi9Db2xvclBpY2tlcidcbmltcG9ydCBCdXR0b24gZnJvbSAnLi9CdXR0b24nXG5pbXBvcnQgUG9wb3V0LCB7IG1hbmFnZVBvcG91dCB9IGZyb20gJy4vUG9wb3V0J1xuaW1wb3J0IHsgQ09MT1JTLCBERUZBVUxUX0JHX0NPTE9SIH0gZnJvbSAnLi4vbGliL2NvbnN0YW50cydcbmltcG9ydCB7IHN0cmluZ2lmeVJHQkEgfSBmcm9tICcuLi9saWIvdXRpbCdcblxuZnVuY3Rpb24gdmFsaWRhdGVDb2xvcihzdHIpIHtcbiAgaWYgKC8jXFxkezMsNn18cmdiYXswLDF9XFwoLio/XFwpL2dpLnRlc3Qoc3RyKSB8fCAvXFx3Ky9naS50ZXN0KHN0cikpIHtcbiAgICByZXR1cm4gc3RyXG4gIH1cbn1cblxuY2xhc3MgQmFja2dyb3VuZFNlbGVjdCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICBzZWxlY3RUYWIgPSBuYW1lID0+IHtcbiAgICBpZiAodGhpcy5wcm9wcy5tb2RlICE9PSBuYW1lKSB7XG4gICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHsgYmFja2dyb3VuZE1vZGU6IG5hbWUgfSlcbiAgICB9XG4gIH1cblxuICBoYW5kbGVQaWNrQ29sb3IgPSAoeyByZ2IgfSkgPT4gdGhpcy5wcm9wcy5vbkNoYW5nZSh7IGJhY2tncm91bmRDb2xvcjogc3RyaW5naWZ5UkdCQShyZ2IpIH0pXG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGNvbG9yLFxuICAgICAgbW9kZSxcbiAgICAgIGltYWdlLFxuICAgICAgb25DaGFuZ2UsXG4gICAgICBpc1Zpc2libGUsXG4gICAgICB0b2dnbGVWaXNpYmlsaXR5LFxuICAgICAgY2FyYm9uUmVmLFxuICAgICAgdXBkYXRlSGlnaGxpZ2h0cyxcbiAgICB9ID0gdGhpcy5wcm9wc1xuXG4gICAgY29uc3QgYmFja2dyb3VuZCA9IHZhbGlkYXRlQ29sb3IoY29sb3IpID8gY29sb3IgOiBERUZBVUxUX0JHX0NPTE9SXG5cbiAgICBjb25zdCBhc3BlY3RSYXRpbyA9IGNhcmJvblJlZiA/IGNhcmJvblJlZi5jbGllbnRXaWR0aCAvIGNhcmJvblJlZi5jbGllbnRIZWlnaHQgOiAxXG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1zZWxlY3QtY29udGFpbmVyXCI+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB0aXRsZT1cIkJhY2tncm91bmQgTWVudVwiXG4gICAgICAgICAgYm9yZGVyXG4gICAgICAgICAgY2VudGVyXG4gICAgICAgICAgc2VsZWN0ZWQ9e2lzVmlzaWJsZX1cbiAgICAgICAgICBjbGFzc05hbWU9e2BiZy1jb2xvci1jb250YWluZXIgYmctc2VsZWN0LWRpc3BsYXkgJHtpc1Zpc2libGUgPyAnaXMtdmlzaWJsZScgOiAnJ31gfVxuICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZVZpc2liaWxpdHl9XG4gICAgICAgICAgYmFja2dyb3VuZD1cIndoaXRlXCJcbiAgICAgICAgICBob3ZlckJhY2tncm91bmQ9XCJ3aGl0ZVwiXG4gICAgICAgICAgZGF0YS1jeT1cImRpc3BsYXlcIlxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1jb2xvci1hbHBoYVwiIC8+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1jb2xvclwiIC8+XG4gICAgICAgIDwvQnV0dG9uPlxuXG4gICAgICAgIDxQb3BvdXRcbiAgICAgICAgICBpZD1cImJnLXNlbGVjdC1waWNrZXJzXCJcbiAgICAgICAgICBwb2ludGVyTGVmdD1cIjE1cHhcIlxuICAgICAgICAgIGhpZGRlbj17IWlzVmlzaWJsZX1cbiAgICAgICAgICBzdHlsZT17eyB3aWR0aDogJzIyMnB4JyB9fVxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwaWNrZXItdGFic1wiPlxuICAgICAgICAgICAge1snY29sb3InLCAnaW1hZ2UnXS5tYXAodGFiID0+IChcbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIGtleT17dGFifVxuICAgICAgICAgICAgICAgIHBhZGRpbmc9XCI4cHggMFwiXG4gICAgICAgICAgICAgICAgY2VudGVyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY2FwaXRhbGl6ZVwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5zZWxlY3RUYWIuYmluZChudWxsLCB0YWIpfVxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ9e21vZGUgPT09IHRhYiA/IENPTE9SUy5CTEFDSyA6IENPTE9SUy5EQVJLX0dSQVl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7dGFifVxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGlja2VyLXRhYnMtY29udGVudHNcIj5cbiAgICAgICAgICAgIDxkaXYgaGlkZGVuPXttb2RlICE9PSAnY29sb3InfT5cbiAgICAgICAgICAgICAgPENvbG9yUGlja2VyIGNvbG9yPXtjb2xvcn0gb25DaGFuZ2U9e3RoaXMuaGFuZGxlUGlja0NvbG9yfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGhpZGRlbj17bW9kZSAhPT0gJ2ltYWdlJ30+XG4gICAgICAgICAgICAgIDxJbWFnZVBpY2tlclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cbiAgICAgICAgICAgICAgICBpbWFnZURhdGFVUkw9e2ltYWdlfVxuICAgICAgICAgICAgICAgIGFzcGVjdFJhdGlvPXthc3BlY3RSYXRpb31cbiAgICAgICAgICAgICAgICB1cGRhdGVIaWdobGlnaHRzPXt1cGRhdGVIaWdobGlnaHRzfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvUG9wb3V0PlxuICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgIHtgXG4gICAgICAgICAgICAuYmctc2VsZWN0LWNvbnRhaW5lciB7XG4gICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLmJnLXNlbGVjdC1jb250YWluZXIgOmdsb2JhbCguYmctc2VsZWN0LWRpc3BsYXkpIHtcbiAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgIHdpZHRoOiA0MHB4O1xuICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAke0NPTE9SUy5TRUNPTkRBUll9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuYmctc2VsZWN0LWNvbnRhaW5lciA6Z2xvYmFsKC5iZy1zZWxlY3QtZGlzcGxheS5pcy12aXNpYmxlKSxcbiAgICAgICAgICAgIC5iZy1zZWxlY3QtY29udGFpbmVyIDpnbG9iYWwoLmJnLXNlbGVjdC1kaXNwbGF5OmZvY3VzKSB7XG4gICAgICAgICAgICAgIGJvcmRlci13aWR0aDogMnB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuYmctY29sb3Ige1xuICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgIHRvcDogMHB4O1xuICAgICAgICAgICAgICByaWdodDogMHB4O1xuICAgICAgICAgICAgICBib3R0b206IDBweDtcbiAgICAgICAgICAgICAgbGVmdDogMHB4O1xuICAgICAgICAgICAgICAke21vZGUgPT09ICdpbWFnZSdcbiAgICAgICAgICAgICAgICA/IGBiYWNrZ3JvdW5kOiB1cmwoJHtpbWFnZX0pO1xuICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xuICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O2BcbiAgICAgICAgICAgICAgICA6IGBiYWNrZ3JvdW5kOiAke2JhY2tncm91bmR9O2B9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuYmctY29sb3ItYWxwaGEge1xuICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgIHRvcDogMHB4O1xuICAgICAgICAgICAgICByaWdodDogMHB4O1xuICAgICAgICAgICAgICBib3R0b206IDBweDtcbiAgICAgICAgICAgICAgbGVmdDogMHB4O1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB1cmwoZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQU1VbEVRVlE0VDJOa1lHQVFZY0FQM3VDVFpodzFnR0dZaEFHQlpJQS9uWURDZ0JEQW05QkdEV0FBSnlSQ2dMYUJDQUFnWHdpeHpBUzBwZ0FBQUFCSlJVNUVya0pnZ2c9PSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5waWNrZXItdGFicyB7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAke0NPTE9SUy5TRUNPTkRBUll9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAucGlja2VyLXRhYnMgOmdsb2JhbChidXR0b24pIHtcbiAgICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgJHtDT0xPUlMuU0VDT05EQVJZfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnBpY2tlci10YWJzIDpnbG9iYWwoYnV0dG9uOmxhc3QtY2hpbGQpIHtcbiAgICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiBub25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIGB9XG4gICAgICAgIDwvc3R5bGU+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbWFuYWdlUG9wb3V0KEJhY2tncm91bmRTZWxlY3QpXG4iXX0= */\n/*@ sourceURL=/Users/limengyu/Desktop/private/code/project/show-codes/components/BackgroundSelect.js */`\n      }, void 0, false, void 0, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default managePopout(BackgroundSelect);","map":{"version":3,"sources":["/Users/limengyu/Desktop/private/code/project/show-codes/components/BackgroundSelect.js"],"names":["React","ImagePicker","ColorPicker","Button","Popout","managePopout","COLORS","DEFAULT_BG_COLOR","stringifyRGBA","validateColor","str","test","BackgroundSelect","PureComponent","name","props","mode","onChange","backgroundMode","rgb","backgroundColor","render","color","image","isVisible","toggleVisibility","carbonRef","updateHighlights","background","aspectRatio","clientWidth","clientHeight","SECONDARY","width","map","tab","selectTab","bind","BLACK","DARK_GRAY","handlePickColor"],"mappings":"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","sourcesContent":["import React from 'react'\n\nimport ImagePicker from './ImagePicker'\nimport ColorPicker from './ColorPicker'\nimport Button from './Button'\nimport Popout, { managePopout } from './Popout'\nimport { COLORS, DEFAULT_BG_COLOR } from '../lib/constants'\nimport { stringifyRGBA } from '../lib/util'\n\nfunction validateColor(str) {\n  if (/#\\d{3,6}|rgba{0,1}\\(.*?\\)/gi.test(str) || /\\w+/gi.test(str)) {\n    return str\n  }\n}\n\nclass BackgroundSelect extends React.PureComponent {\n  selectTab = name => {\n    if (this.props.mode !== name) {\n      this.props.onChange({ backgroundMode: name })\n    }\n  }\n\n  handlePickColor = ({ rgb }) => this.props.onChange({ backgroundColor: stringifyRGBA(rgb) })\n\n  render() {\n    const {\n      color,\n      mode,\n      image,\n      onChange,\n      isVisible,\n      toggleVisibility,\n      carbonRef,\n      updateHighlights,\n    } = this.props\n\n    const background = validateColor(color) ? color : DEFAULT_BG_COLOR\n\n    const aspectRatio = carbonRef ? carbonRef.clientWidth / carbonRef.clientHeight : 1\n\n    return (\n      <div className=\"bg-select-container\">\n        <Button\n          title=\"Background Menu\"\n          border\n          center\n          selected={isVisible}\n          className={`bg-color-container bg-select-display ${isVisible ? 'is-visible' : ''}`}\n          onClick={toggleVisibility}\n          background=\"white\"\n          hoverBackground=\"white\"\n          data-cy=\"display\"\n        >\n          <div className=\"bg-color-alpha\" />\n          <div className=\"bg-color\" />\n        </Button>\n\n        <Popout\n          id=\"bg-select-pickers\"\n          pointerLeft=\"15px\"\n          hidden={!isVisible}\n          style={{ width: '222px' }}\n        >\n          <div className=\"picker-tabs\">\n            {['color', 'image'].map(tab => (\n              <Button\n                key={tab}\n                padding=\"8px 0\"\n                center\n                className=\"capitalize\"\n                onClick={this.selectTab.bind(null, tab)}\n                background={mode === tab ? COLORS.BLACK : COLORS.DARK_GRAY}\n              >\n                {tab}\n              </Button>\n            ))}\n          </div>\n          <div className=\"picker-tabs-contents\">\n            <div hidden={mode !== 'color'}>\n              <ColorPicker color={color} onChange={this.handlePickColor} />\n            </div>\n            <div hidden={mode !== 'image'}>\n              <ImagePicker\n                onChange={onChange}\n                imageDataURL={image}\n                aspectRatio={aspectRatio}\n                updateHighlights={updateHighlights}\n              />\n            </div>\n          </div>\n        </Popout>\n        <style jsx>\n          {`\n            .bg-select-container {\n              height: 100%;\n            }\n\n            .bg-select-container :global(.bg-select-display) {\n              position: relative;\n              overflow: hidden;\n              height: 100%;\n              width: 40px;\n              border: 1px solid ${COLORS.SECONDARY};\n            }\n\n            .bg-select-container :global(.bg-select-display.is-visible),\n            .bg-select-container :global(.bg-select-display:focus) {\n              border-width: 2px;\n            }\n\n            .bg-color {\n              position: absolute;\n              top: 0px;\n              right: 0px;\n              bottom: 0px;\n              left: 0px;\n              ${mode === 'image'\n                ? `background: url(${image});\n                 background-size: cover;\n                 background-repeat: no-repeat;`\n                : `background: ${background};`};\n            }\n\n            .bg-color-alpha {\n              position: absolute;\n              top: 0px;\n              right: 0px;\n              bottom: 0px;\n              left: 0px;\n              background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==);\n            }\n\n            .picker-tabs {\n              display: flex;\n              border-bottom: 2px solid ${COLORS.SECONDARY};\n            }\n\n            .picker-tabs :global(button) {\n              border-right: 1px solid ${COLORS.SECONDARY};\n            }\n\n            .picker-tabs :global(button:last-child) {\n              border-right: none;\n            }\n          `}\n        </style>\n      </div>\n    )\n  }\n}\n\nexport default managePopout(BackgroundSelect)\n"]},"metadata":{},"sourceType":"module"}