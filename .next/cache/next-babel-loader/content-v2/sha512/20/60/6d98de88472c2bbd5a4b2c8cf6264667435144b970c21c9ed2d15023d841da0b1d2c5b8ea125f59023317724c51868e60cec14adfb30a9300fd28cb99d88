{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/limengyu/Desktop/private/code/project/show-codes/components/ImagePicker.js\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport ReactCrop, { makeAspectCrop } from 'react-image-crop';\nimport { useLocalStorage } from 'actionsack';\nimport RandomImage from './RandomImage';\nimport PhotoCredit from './PhotoCredit';\nimport Input from './Input';\nimport Toggle from './Toggle';\nimport { Link } from './Meta';\nimport { fileToDataURL } from '../lib/util';\nimport ApiContext from './ApiContext';\n\nconst getCroppedImg = (imageDataURL, pixelCrop) => {\n  const canvas = document.createElement('canvas');\n  canvas.width = pixelCrop.width;\n  canvas.height = pixelCrop.height;\n  const ctx = canvas.getContext('2d');\n  return new Promise(resolve => {\n    const image = new Image();\n    image.src = imageDataURL;\n\n    image.onload = () => {\n      ctx.drawImage(image, pixelCrop.x, pixelCrop.y, pixelCrop.width, pixelCrop.height, 0, 0, pixelCrop.width, pixelCrop.height);\n      resolve(canvas.toDataURL('image/jpeg'));\n    };\n  });\n};\n\nconst INITIAL_STATE = {\n  mode: 'file',\n  crop: null,\n  imageAspectRatio: null,\n  pixelCrop: null,\n  photographer: null,\n  dataURL: null\n};\nexport default class ImagePicker extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", INITIAL_STATE);\n\n    _defineProperty(this, \"selectMode\", mode => this.setState({\n      mode\n    }));\n\n    _defineProperty(this, \"onDragEnd\", async () => {\n      if (this.state.pixelCrop) {\n        const croppedImg = await getCroppedImg(this.state.dataURL, this.state.pixelCrop);\n        this.props.onChange({\n          backgroundImageSelection: croppedImg\n        });\n      }\n    });\n\n    _defineProperty(this, \"onCropChange\", (crop, pixelCrop) => {\n      this.setState({\n        crop: _objectSpread(_objectSpread({}, crop), {}, {\n          aspect: this.props.aspectRatio\n        }),\n        pixelCrop\n      });\n    });\n\n    _defineProperty(this, \"onImageLoaded\", image => {\n      const imageAspectRatio = image.width / image.height;\n      const initialCrop = {\n        x: 0,\n        y: 0,\n        width: 100,\n        aspect: this.props.aspectRatio\n      };\n      this.setState({\n        imageAspectRatio,\n        crop: makeAspectCrop(initialCrop, imageAspectRatio)\n      });\n    });\n\n    _defineProperty(this, \"handleImageChange\", (url, dataURL, photographer) => {\n      this.setState({\n        dataURL,\n        photographer\n      }, () => {\n        this.props.onChange({\n          backgroundImage: url,\n          backgroundImageSelection: null,\n          photographer\n        });\n      });\n    });\n\n    _defineProperty(this, \"handleURLInput\", e => {\n      e.preventDefault();\n      const url = e.target[0].value;\n      return this.context.downloadThumbnailImage({\n        url\n      }).then(res => res.dataURL).then(dataURL => this.handleImageChange(url, dataURL)).catch(err => {\n        if (err.message.indexOf('Network Error') > -1) {\n          this.setState({\n            error: 'Fetching the image failed. This is probably a CORS-related issue. You can either enable CORS in your browser, or use another image.'\n          });\n        }\n      });\n    });\n\n    _defineProperty(this, \"uploadImage\", async e => {\n      const dataURL = await fileToDataURL(e.target.files[0]);\n      return this.handleImageChange(dataURL, dataURL);\n    });\n\n    _defineProperty(this, \"selectImage\", async image => {\n      // TODO use React suspense for loading this asset\n      const {\n        dataURL\n      } = await this.context.downloadThumbnailImage(image);\n      this.handleImageChange(image.url, dataURL, image.photographer);\n\n      if (image.palette && image.palette.length && this.generateColorPalette) {\n        /*\n         * Background is first, which is either the lightest or darkest color\n         * and the rest are sorted by highest contrast w/ the background\n         */\n        const palette = image.palette.map(c => c.hex);\n        /*\n         * Contributors, please feel free to adjust this algorithm to create the most\n         * readible or aesthetically pleasing syntax highlighting.\n         */\n\n        this.props.updateHighlights({\n          background: palette[0],\n          text: palette[1],\n          variable: palette[2],\n          attribute: palette[3],\n          definition: palette[4],\n          keyword: palette[5],\n          property: palette[6],\n          string: palette[7],\n          number: palette[8],\n          operator: palette[9],\n          meta: palette[10],\n          tag: palette[11],\n          comment: palette[12]\n        });\n      }\n    });\n\n    _defineProperty(this, \"removeImage\", () => {\n      this.setState(INITIAL_STATE, () => {\n        this.props.onChange({\n          backgroundImage: null,\n          backgroundImageSelection: null\n        });\n      });\n    });\n  }\n\n  static getDerivedStateFromProps(nextProps, state) {\n    if (state.crop) {\n      // update crop for editor container aspect-ratio change\n      return {\n        crop: makeAspectCrop(_objectSpread(_objectSpread({}, state.crop), {}, {\n          aspect: nextProps.aspectRatio\n        }), state.imageAspectRatio)\n      };\n    }\n\n    return null;\n  }\n\n  render() {\n    let content = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"jsx-806487619\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"jsx-806487619\" + \" \" + \"choose-image\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"jsx-806487619\",\n          children: \"\\u4E0A\\u4F20\\u80CC\\u666F\\u56FE\\u7247:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.selectMode.bind(this, 'file'),\n          className: \"jsx-806487619\" + \" \" + ((this.state.mode === 'file' ? 'active' : 'none') || \"\"),\n          children: \"File\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.selectMode.bind(this, 'url'),\n          className: \"jsx-806487619\" + \" \" + ((this.state.mode === 'url' ? 'active' : 'none') || \"\"),\n          children: \"URL\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), this.state.mode === 'file' ? /*#__PURE__*/_jsxDEV(Input, {\n          type: \"file\",\n          accept: \"image/png,image/x-png,image/jpeg,image/jpg\",\n          onChange: this.uploadImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: this.handleURLInput,\n          className: \"jsx-806487619\",\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            title: \"Background Image\",\n            placeholder: \"Image URL\\u2026\",\n            align: \"left\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"jsx-806487619\",\n            children: \"Upload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 15\n        }, this), this.state.error && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"jsx-806487619\" + \" \" + \"error\",\n          children: this.state.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 32\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        className: \"jsx-806487619\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"jsx-806487619\" + \" \" + \"random-image\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"jsx-806487619\",\n          children: [\"Or use a random \", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"https://unsplash.com/\",\n            className: \"jsx-806487619\",\n            children: \"Unsplash\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 29\n          }, this), \" image:\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(RandomImage, {\n          onChange: this.selectImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(GeneratePaletteSetting, {\n          onChange: value => this.generateColorPalette = value\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n        id: \"806487619\",\n        children: \"button.jsx-806487619{display:inline-block;}.choose-image.jsx-806487619,.random-image.jsx-806487619{padding:8px;}.choose-image.jsx-806487619>button.jsx-806487619{cursor:pointer;color:white;background:transparent;border:none;outline:none;padding:0;margin:0 8px 8px 0;}.choose-image.jsx-806487619>button.jsx-806487619:not(.active){opacity:0.4;}.choose-image.jsx-806487619>button.jsx-806487619:focus{-webkit-text-decoration:underline;text-decoration:underline;}form.jsx-806487619{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}form.jsx-806487619>button.jsx-806487619{padding:1px 18px 2px 7px;}span.jsx-806487619{display:block;margin-bottom:16px;}a.jsx-806487619{-webkit-text-decoration:underline;text-decoration:underline;}hr.jsx-806487619{border-bottom:none;margin-bottom:0;margin-top:0;}.error.jsx-806487619{color:red;margin-top:8px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9saW1lbmd5dS9EZXNrdG9wL3ByaXZhdGUvY29kZS9wcm9qZWN0L3Nob3ctY29kZXMvY29tcG9uZW50cy9JbWFnZVBpY2tlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFxTlcsQUFHb0MsQUFLVCxBQUlHLEFBVUgsQUFJYyxBQUliLEFBS1ksQUFJWCxBQUtZLEFBSVAsQUFNVCxVQUNLLEVBOUNqQixBQWNBLEVBaUJxQixDQTNCUCxJQW9DSSxFQTdDbEIsSUFnQ0EsQUFvQkEsRUExQ3lCLE1BMkJ6QixFQVNlLGFBQ2YsRUFwQ2MsVUFZZCxBQWtCQSxFQTdCZSxZQWVpQixDQWRwQixVQUNTLG1CQUNyQixxRkFhQSIsImZpbGUiOiIvVXNlcnMvbGltZW5neXUvRGVza3RvcC9wcml2YXRlL2NvZGUvcHJvamVjdC9zaG93LWNvZGVzL2NvbXBvbmVudHMvSW1hZ2VQaWNrZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgUmVhY3RDcm9wLCB7IG1ha2VBc3BlY3RDcm9wIH0gZnJvbSAncmVhY3QtaW1hZ2UtY3JvcCdcbmltcG9ydCB7IHVzZUxvY2FsU3RvcmFnZSB9IGZyb20gJ2FjdGlvbnNhY2snXG5cbmltcG9ydCBSYW5kb21JbWFnZSBmcm9tICcuL1JhbmRvbUltYWdlJ1xuaW1wb3J0IFBob3RvQ3JlZGl0IGZyb20gJy4vUGhvdG9DcmVkaXQnXG5pbXBvcnQgSW5wdXQgZnJvbSAnLi9JbnB1dCdcbmltcG9ydCBUb2dnbGUgZnJvbSAnLi9Ub2dnbGUnXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAnLi9NZXRhJ1xuaW1wb3J0IHsgZmlsZVRvRGF0YVVSTCB9IGZyb20gJy4uL2xpYi91dGlsJ1xuaW1wb3J0IEFwaUNvbnRleHQgZnJvbSAnLi9BcGlDb250ZXh0J1xuXG5jb25zdCBnZXRDcm9wcGVkSW1nID0gKGltYWdlRGF0YVVSTCwgcGl4ZWxDcm9wKSA9PiB7XG4gIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpXG4gIGNhbnZhcy53aWR0aCA9IHBpeGVsQ3JvcC53aWR0aFxuICBjYW52YXMuaGVpZ2h0ID0gcGl4ZWxDcm9wLmhlaWdodFxuICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxuXG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpXG4gICAgaW1hZ2Uuc3JjID0gaW1hZ2VEYXRhVVJMXG4gICAgaW1hZ2Uub25sb2FkID0gKCkgPT4ge1xuICAgICAgY3R4LmRyYXdJbWFnZShcbiAgICAgICAgaW1hZ2UsXG4gICAgICAgIHBpeGVsQ3JvcC54LFxuICAgICAgICBwaXhlbENyb3AueSxcbiAgICAgICAgcGl4ZWxDcm9wLndpZHRoLFxuICAgICAgICBwaXhlbENyb3AuaGVpZ2h0LFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICBwaXhlbENyb3Aud2lkdGgsXG4gICAgICAgIHBpeGVsQ3JvcC5oZWlnaHRcbiAgICAgIClcblxuICAgICAgcmVzb2x2ZShjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9qcGVnJykpXG4gICAgfVxuICB9KVxufVxuXG5jb25zdCBJTklUSUFMX1NUQVRFID0ge1xuICBtb2RlOiAnZmlsZScsXG4gIGNyb3A6IG51bGwsXG4gIGltYWdlQXNwZWN0UmF0aW86IG51bGwsXG4gIHBpeGVsQ3JvcDogbnVsbCxcbiAgcGhvdG9ncmFwaGVyOiBudWxsLFxuICBkYXRhVVJMOiBudWxsLFxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbWFnZVBpY2tlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBjb250ZXh0VHlwZSA9IEFwaUNvbnRleHRcbiAgc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhuZXh0UHJvcHMsIHN0YXRlKSB7XG4gICAgaWYgKHN0YXRlLmNyb3ApIHtcbiAgICAgIC8vIHVwZGF0ZSBjcm9wIGZvciBlZGl0b3IgY29udGFpbmVyIGFzcGVjdC1yYXRpbyBjaGFuZ2VcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNyb3A6IG1ha2VBc3BlY3RDcm9wKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIC4uLnN0YXRlLmNyb3AsXG4gICAgICAgICAgICBhc3BlY3Q6IG5leHRQcm9wcy5hc3BlY3RSYXRpbyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0YXRlLmltYWdlQXNwZWN0UmF0aW9cbiAgICAgICAgKSxcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHN0YXRlID0gSU5JVElBTF9TVEFURVxuXG4gIHNlbGVjdE1vZGUgPSBtb2RlID0+IHRoaXMuc2V0U3RhdGUoeyBtb2RlIH0pXG5cbiAgb25EcmFnRW5kID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICh0aGlzLnN0YXRlLnBpeGVsQ3JvcCkge1xuICAgICAgY29uc3QgY3JvcHBlZEltZyA9IGF3YWl0IGdldENyb3BwZWRJbWcodGhpcy5zdGF0ZS5kYXRhVVJMLCB0aGlzLnN0YXRlLnBpeGVsQ3JvcClcbiAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UoeyBiYWNrZ3JvdW5kSW1hZ2VTZWxlY3Rpb246IGNyb3BwZWRJbWcgfSlcbiAgICB9XG4gIH1cblxuICBvbkNyb3BDaGFuZ2UgPSAoY3JvcCwgcGl4ZWxDcm9wKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBjcm9wOiB7IC4uLmNyb3AsIGFzcGVjdDogdGhpcy5wcm9wcy5hc3BlY3RSYXRpbyB9LFxuICAgICAgcGl4ZWxDcm9wLFxuICAgIH0pXG4gIH1cblxuICBvbkltYWdlTG9hZGVkID0gaW1hZ2UgPT4ge1xuICAgIGNvbnN0IGltYWdlQXNwZWN0UmF0aW8gPSBpbWFnZS53aWR0aCAvIGltYWdlLmhlaWdodFxuICAgIGNvbnN0IGluaXRpYWxDcm9wID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICB3aWR0aDogMTAwLFxuICAgICAgYXNwZWN0OiB0aGlzLnByb3BzLmFzcGVjdFJhdGlvLFxuICAgIH1cblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgaW1hZ2VBc3BlY3RSYXRpbyxcbiAgICAgIGNyb3A6IG1ha2VBc3BlY3RDcm9wKGluaXRpYWxDcm9wLCBpbWFnZUFzcGVjdFJhdGlvKSxcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlSW1hZ2VDaGFuZ2UgPSAodXJsLCBkYXRhVVJMLCBwaG90b2dyYXBoZXIpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgZGF0YVVSTCwgcGhvdG9ncmFwaGVyIH0sICgpID0+IHtcbiAgICAgIHRoaXMucHJvcHMub25DaGFuZ2Uoe1xuICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IHVybCxcbiAgICAgICAgYmFja2dyb3VuZEltYWdlU2VsZWN0aW9uOiBudWxsLFxuICAgICAgICBwaG90b2dyYXBoZXIsXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBoYW5kbGVVUkxJbnB1dCA9IGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHVybCA9IGUudGFyZ2V0WzBdLnZhbHVlXG4gICAgcmV0dXJuIHRoaXMuY29udGV4dFxuICAgICAgLmRvd25sb2FkVGh1bWJuYWlsSW1hZ2UoeyB1cmwgfSlcbiAgICAgIC50aGVuKHJlcyA9PiByZXMuZGF0YVVSTClcbiAgICAgIC50aGVuKGRhdGFVUkwgPT4gdGhpcy5oYW5kbGVJbWFnZUNoYW5nZSh1cmwsIGRhdGFVUkwpKVxuICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIGlmIChlcnIubWVzc2FnZS5pbmRleE9mKCdOZXR3b3JrIEVycm9yJykgPiAtMSkge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgZXJyb3I6XG4gICAgICAgICAgICAgICdGZXRjaGluZyB0aGUgaW1hZ2UgZmFpbGVkLiBUaGlzIGlzIHByb2JhYmx5IGEgQ09SUy1yZWxhdGVkIGlzc3VlLiBZb3UgY2FuIGVpdGhlciBlbmFibGUgQ09SUyBpbiB5b3VyIGJyb3dzZXIsIG9yIHVzZSBhbm90aGVyIGltYWdlLicsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgfVxuXG4gIHVwbG9hZEltYWdlID0gYXN5bmMgZSA9PiB7XG4gICAgY29uc3QgZGF0YVVSTCA9IGF3YWl0IGZpbGVUb0RhdGFVUkwoZS50YXJnZXQuZmlsZXNbMF0pXG4gICAgcmV0dXJuIHRoaXMuaGFuZGxlSW1hZ2VDaGFuZ2UoZGF0YVVSTCwgZGF0YVVSTClcbiAgfVxuXG4gIHNlbGVjdEltYWdlID0gYXN5bmMgaW1hZ2UgPT4ge1xuICAgIC8vIFRPRE8gdXNlIFJlYWN0IHN1c3BlbnNlIGZvciBsb2FkaW5nIHRoaXMgYXNzZXRcbiAgICBjb25zdCB7IGRhdGFVUkwgfSA9IGF3YWl0IHRoaXMuY29udGV4dC5kb3dubG9hZFRodW1ibmFpbEltYWdlKGltYWdlKVxuXG4gICAgdGhpcy5oYW5kbGVJbWFnZUNoYW5nZShpbWFnZS51cmwsIGRhdGFVUkwsIGltYWdlLnBob3RvZ3JhcGhlcilcbiAgICBpZiAoaW1hZ2UucGFsZXR0ZSAmJiBpbWFnZS5wYWxldHRlLmxlbmd0aCAmJiB0aGlzLmdlbmVyYXRlQ29sb3JQYWxldHRlKSB7XG4gICAgICAvKlxuICAgICAgICogQmFja2dyb3VuZCBpcyBmaXJzdCwgd2hpY2ggaXMgZWl0aGVyIHRoZSBsaWdodGVzdCBvciBkYXJrZXN0IGNvbG9yXG4gICAgICAgKiBhbmQgdGhlIHJlc3QgYXJlIHNvcnRlZCBieSBoaWdoZXN0IGNvbnRyYXN0IHcvIHRoZSBiYWNrZ3JvdW5kXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IHBhbGV0dGUgPSBpbWFnZS5wYWxldHRlLm1hcChjID0+IGMuaGV4KVxuICAgICAgLypcbiAgICAgICAqIENvbnRyaWJ1dG9ycywgcGxlYXNlIGZlZWwgZnJlZSB0byBhZGp1c3QgdGhpcyBhbGdvcml0aG0gdG8gY3JlYXRlIHRoZSBtb3N0XG4gICAgICAgKiByZWFkaWJsZSBvciBhZXN0aGV0aWNhbGx5IHBsZWFzaW5nIHN5bnRheCBoaWdobGlnaHRpbmcuXG4gICAgICAgKi9cbiAgICAgIHRoaXMucHJvcHMudXBkYXRlSGlnaGxpZ2h0cyh7XG4gICAgICAgIGJhY2tncm91bmQ6IHBhbGV0dGVbMF0sXG4gICAgICAgIHRleHQ6IHBhbGV0dGVbMV0sXG4gICAgICAgIHZhcmlhYmxlOiBwYWxldHRlWzJdLFxuICAgICAgICBhdHRyaWJ1dGU6IHBhbGV0dGVbM10sXG4gICAgICAgIGRlZmluaXRpb246IHBhbGV0dGVbNF0sXG4gICAgICAgIGtleXdvcmQ6IHBhbGV0dGVbNV0sXG4gICAgICAgIHByb3BlcnR5OiBwYWxldHRlWzZdLFxuICAgICAgICBzdHJpbmc6IHBhbGV0dGVbN10sXG4gICAgICAgIG51bWJlcjogcGFsZXR0ZVs4XSxcbiAgICAgICAgb3BlcmF0b3I6IHBhbGV0dGVbOV0sXG4gICAgICAgIG1ldGE6IHBhbGV0dGVbMTBdLFxuICAgICAgICB0YWc6IHBhbGV0dGVbMTFdLFxuICAgICAgICBjb21tZW50OiBwYWxldHRlWzEyXSxcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlSW1hZ2UgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZShJTklUSUFMX1NUQVRFLCAoKSA9PiB7XG4gICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHtcbiAgICAgICAgYmFja2dyb3VuZEltYWdlOiBudWxsLFxuICAgICAgICBiYWNrZ3JvdW5kSW1hZ2VTZWxlY3Rpb246IG51bGwsXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgbGV0IGNvbnRlbnQgPSAoXG4gICAgICA8ZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNob29zZS1pbWFnZVwiPlxuICAgICAgICAgIDxzcGFuPuS4iuS8oOiDjOaZr+WbvueJhzo8L3NwYW4+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgY2xhc3NOYW1lPXt0aGlzLnN0YXRlLm1vZGUgPT09ICdmaWxlJyA/ICdhY3RpdmUnIDogJ25vbmUnfVxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5zZWxlY3RNb2RlLmJpbmQodGhpcywgJ2ZpbGUnKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICBGaWxlXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgY2xhc3NOYW1lPXt0aGlzLnN0YXRlLm1vZGUgPT09ICd1cmwnID8gJ2FjdGl2ZScgOiAnbm9uZSd9XG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnNlbGVjdE1vZGUuYmluZCh0aGlzLCAndXJsJyl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgVVJMXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAge3RoaXMuc3RhdGUubW9kZSA9PT0gJ2ZpbGUnID8gKFxuICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgICAgICAgICAgYWNjZXB0PVwiaW1hZ2UvcG5nLGltYWdlL3gtcG5nLGltYWdlL2pwZWcsaW1hZ2UvanBnXCJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMudXBsb2FkSW1hZ2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXt0aGlzLmhhbmRsZVVSTElucHV0fT5cbiAgICAgICAgICAgICAgICA8SW5wdXQgdHlwZT1cInRleHRcIiB0aXRsZT1cIkJhY2tncm91bmQgSW1hZ2VcIiBwbGFjZWhvbGRlcj1cIkltYWdlIFVSTOKAplwiIGFsaWduPVwibGVmdFwiIC8+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCI+VXBsb2FkPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAge3RoaXMuc3RhdGUuZXJyb3IgJiYgPHNwYW4gY2xhc3NOYW1lPVwiZXJyb3JcIj57dGhpcy5zdGF0ZS5lcnJvcn08L3NwYW4+fVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGhyIC8+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmFuZG9tLWltYWdlXCI+XG4gICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICBPciB1c2UgYSByYW5kb20gPGEgaHJlZj1cImh0dHBzOi8vdW5zcGxhc2guY29tL1wiPlVuc3BsYXNoPC9hPiBpbWFnZTpcbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPFJhbmRvbUltYWdlIG9uQ2hhbmdlPXt0aGlzLnNlbGVjdEltYWdlfSAvPlxuICAgICAgICAgIDxHZW5lcmF0ZVBhbGV0dGVTZXR0aW5nIG9uQ2hhbmdlPXt2YWx1ZSA9PiAodGhpcy5nZW5lcmF0ZUNvbG9yUGFsZXR0ZSA9IHZhbHVlKX0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAge2BcbiAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLmNob29zZS1pbWFnZSxcbiAgICAgICAgICAgIC5yYW5kb20taW1hZ2Uge1xuICAgICAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5jaG9vc2UtaW1hZ2UgPiBidXR0b24ge1xuICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgICAgICAgbWFyZ2luOiAwIDhweCA4cHggMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLmNob29zZS1pbWFnZSA+IGJ1dHRvbjpub3QoLmFjdGl2ZSkge1xuICAgICAgICAgICAgICBvcGFjaXR5OiAwLjQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5jaG9vc2UtaW1hZ2UgPiBidXR0b246Zm9jdXMge1xuICAgICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9ybSB7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9ybSA+IGJ1dHRvbiB7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDFweCAxOHB4IDJweCA3cHg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNwYW4ge1xuICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTZweDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYSB7XG4gICAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBociB7XG4gICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IG5vbmU7XG4gICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDA7XG4gICAgICAgICAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5lcnJvciB7XG4gICAgICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBgfVxuICAgICAgICA8L3N0eWxlPlxuICAgICAgPC9kaXY+XG4gICAgKVxuXG4gICAgaWYgKHRoaXMuc3RhdGUuZGF0YVVSTCkge1xuICAgICAgY29udGVudCA9IChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZXR0aW5ncy1jb250YWluZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImltYWdlLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsYWJlbFwiPlxuICAgICAgICAgICAgICA8c3Bhbj5CYWNrZ3JvdW5kIGltYWdlPC9zcGFuPlxuICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMucmVtb3ZlSW1hZ2V9PiZ0aW1lczs8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPFJlYWN0Q3JvcFxuICAgICAgICAgICAgICBzcmM9e3RoaXMuc3RhdGUuZGF0YVVSTH1cbiAgICAgICAgICAgICAgb25JbWFnZUxvYWRlZD17dGhpcy5vbkltYWdlTG9hZGVkfVxuICAgICAgICAgICAgICBjcm9wPXt0aGlzLnN0YXRlLmNyb3B9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQ3JvcENoYW5nZX1cbiAgICAgICAgICAgICAgb25EcmFnRW5kPXt0aGlzLm9uRHJhZ0VuZH1cbiAgICAgICAgICAgICAgbWluSGVpZ2h0PXsxMH1cbiAgICAgICAgICAgICAgbWluV2lkdGg9ezEwfVxuICAgICAgICAgICAgICBrZWVwU2VsZWN0aW9uXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAge3RoaXMuc3RhdGUucGhvdG9ncmFwaGVyICYmIDxQaG90b0NyZWRpdCBwaG90b2dyYXBoZXI9e3RoaXMuc3RhdGUucGhvdG9ncmFwaGVyfSAvPn1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgYnV0dG9uIHtcbiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICAgICAgY29sb3I6IGluaGVyaXQ7XG4gICAgICAgICAgICAgICAgYXBwZWFyYW5jZTogbm9uZTtcbiAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMTZweDtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC5zZXR0aW5ncy1jb250YWluZXIgaW1nIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC5sYWJlbCB7XG4gICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgOmdsb2JhbCguUmVhY3RDcm9wX19pbWFnZSkge1xuICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICAgICAgICAgIHVzZXItZHJhZzogbm9uZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC5pbWFnZS1jb250YWluZXIge1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC5pbWFnZS1jb250YWluZXIgLmxhYmVsIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgfVxuICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImltYWdlLXBpY2tlci1jb250YWluZXJcIj5cbiAgICAgICAgPExpbmsgaHJlZj1cIi9zdGF0aWMvcmVhY3QtY3JvcC5jc3NcIiAvPlxuICAgICAgICB7Y29udGVudH1cbiAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICB7YFxuICAgICAgICAgICAgLmltYWdlLXBpY2tlci1jb250YWluZXIge1xuICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgYH1cbiAgICAgICAgPC9zdHlsZT5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5mdW5jdGlvbiBHZW5lcmF0ZVBhbGV0dGVTZXR0aW5nKHsgb25DaGFuZ2UgfSkge1xuICBjb25zdCBbZW5hYmxlZCwgc2V0RW5hYmxlZF0gPSB1c2VMb2NhbFN0b3JhZ2UoJ0NBUkJPTl9HRU5FUkFURV9DT0xPUl9QQUxFVFRFJylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHZvaWQgb25DaGFuZ2UoZW5hYmxlZCksIFtlbmFibGVkLCBvbkNoYW5nZV0pXG5cbiAgcmV0dXJuIChcbiAgICA8VG9nZ2xlXG4gICAgICBsYWJlbD1cIkdlbmVyYXRlIGNvbG9yIHBhbGV0dGUgKGJldGEpXCJcbiAgICAgIGVuYWJsZWQ9e2VuYWJsZWR9XG4gICAgICBvbkNoYW5nZT17c2V0RW5hYmxlZH1cbiAgICAgIHBhZGRpbmc9XCI4cHggMCAwXCJcbiAgICAvPlxuICApXG59XG4iXX0= */\\n/*@ sourceURL=/Users/limengyu/Desktop/private/code/project/show-codes/components/ImagePicker.js */\"\n      }, void 0, false, void 0, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this);\n\n    if (this.state.dataURL) {\n      content = /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"jsx-3216813390\" + \" \" + \"settings-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"jsx-3216813390\" + \" \" + \"image-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"jsx-3216813390\" + \" \" + \"label\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"jsx-3216813390\",\n              children: \"Background image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: this.removeImage,\n              className: \"jsx-3216813390\",\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ReactCrop, {\n            src: this.state.dataURL,\n            onImageLoaded: this.onImageLoaded,\n            crop: this.state.crop,\n            onChange: this.onCropChange,\n            onDragEnd: this.onDragEnd,\n            minHeight: 10,\n            minWidth: 10,\n            keepSelection: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this), this.state.photographer && /*#__PURE__*/_jsxDEV(PhotoCredit, {\n            photographer: this.state.photographer\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n          id: \"3216813390\",\n          children: \"button.jsx-3216813390{cursor:pointer;color:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background:none;display:block;padding:0;margin:0;line-height:16px;}.settings-container.jsx-3216813390 img.jsx-3216813390{width:100%;}.label.jsx-3216813390{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-bottom:4px;}.ReactCrop__image{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none;-moz-user-drag:none;-ms-user-drag:none;user-drag:none;}.image-container.jsx-3216813390{padding:8px;}.image-container.jsx-3216813390 .label.jsx-3216813390{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9saW1lbmd5dS9EZXNrdG9wL3ByaXZhdGUvY29kZS9wcm9qZWN0L3Nob3ctY29kZXMvY29tcG9uZW50cy9JbWFnZVBpY2tlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF1U2EsQUFHZ0MsQUFZSixBQUlNLEFBS0EsQUFLTCxBQUlDLFdBakJmLENBY0EsR0ExQmdCLGNBQ0UsNkNBNkJjLFdBZFosQUFLSCxLQW5CSCxZQUNJLENBY2xCLGVBYmdCLGNBQ0osVUFDRCxTQUNRLFdBZW5CLE1BZEEscUJBdUJxQiw2RkFDckIiLCJmaWxlIjoiL1VzZXJzL2xpbWVuZ3l1L0Rlc2t0b3AvcHJpdmF0ZS9jb2RlL3Byb2plY3Qvc2hvdy1jb2Rlcy9jb21wb25lbnRzL0ltYWdlUGlja2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IFJlYWN0Q3JvcCwgeyBtYWtlQXNwZWN0Q3JvcCB9IGZyb20gJ3JlYWN0LWltYWdlLWNyb3AnXG5pbXBvcnQgeyB1c2VMb2NhbFN0b3JhZ2UgfSBmcm9tICdhY3Rpb25zYWNrJ1xuXG5pbXBvcnQgUmFuZG9tSW1hZ2UgZnJvbSAnLi9SYW5kb21JbWFnZSdcbmltcG9ydCBQaG90b0NyZWRpdCBmcm9tICcuL1Bob3RvQ3JlZGl0J1xuaW1wb3J0IElucHV0IGZyb20gJy4vSW5wdXQnXG5pbXBvcnQgVG9nZ2xlIGZyb20gJy4vVG9nZ2xlJ1xuaW1wb3J0IHsgTGluayB9IGZyb20gJy4vTWV0YSdcbmltcG9ydCB7IGZpbGVUb0RhdGFVUkwgfSBmcm9tICcuLi9saWIvdXRpbCdcbmltcG9ydCBBcGlDb250ZXh0IGZyb20gJy4vQXBpQ29udGV4dCdcblxuY29uc3QgZ2V0Q3JvcHBlZEltZyA9IChpbWFnZURhdGFVUkwsIHBpeGVsQ3JvcCkgPT4ge1xuICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKVxuICBjYW52YXMud2lkdGggPSBwaXhlbENyb3Aud2lkdGhcbiAgY2FudmFzLmhlaWdodCA9IHBpeGVsQ3JvcC5oZWlnaHRcbiAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJylcblxuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKVxuICAgIGltYWdlLnNyYyA9IGltYWdlRGF0YVVSTFxuICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIGN0eC5kcmF3SW1hZ2UoXG4gICAgICAgIGltYWdlLFxuICAgICAgICBwaXhlbENyb3AueCxcbiAgICAgICAgcGl4ZWxDcm9wLnksXG4gICAgICAgIHBpeGVsQ3JvcC53aWR0aCxcbiAgICAgICAgcGl4ZWxDcm9wLmhlaWdodCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgcGl4ZWxDcm9wLndpZHRoLFxuICAgICAgICBwaXhlbENyb3AuaGVpZ2h0XG4gICAgICApXG5cbiAgICAgIHJlc29sdmUoY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvanBlZycpKVxuICAgIH1cbiAgfSlcbn1cblxuY29uc3QgSU5JVElBTF9TVEFURSA9IHtcbiAgbW9kZTogJ2ZpbGUnLFxuICBjcm9wOiBudWxsLFxuICBpbWFnZUFzcGVjdFJhdGlvOiBudWxsLFxuICBwaXhlbENyb3A6IG51bGwsXG4gIHBob3RvZ3JhcGhlcjogbnVsbCxcbiAgZGF0YVVSTDogbnVsbCxcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW1hZ2VQaWNrZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgY29udGV4dFR5cGUgPSBBcGlDb250ZXh0XG4gIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBzdGF0ZSkge1xuICAgIGlmIChzdGF0ZS5jcm9wKSB7XG4gICAgICAvLyB1cGRhdGUgY3JvcCBmb3IgZWRpdG9yIGNvbnRhaW5lciBhc3BlY3QtcmF0aW8gY2hhbmdlXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjcm9wOiBtYWtlQXNwZWN0Q3JvcChcbiAgICAgICAgICB7XG4gICAgICAgICAgICAuLi5zdGF0ZS5jcm9wLFxuICAgICAgICAgICAgYXNwZWN0OiBuZXh0UHJvcHMuYXNwZWN0UmF0aW8sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdGF0ZS5pbWFnZUFzcGVjdFJhdGlvXG4gICAgICAgICksXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzdGF0ZSA9IElOSVRJQUxfU1RBVEVcblxuICBzZWxlY3RNb2RlID0gbW9kZSA9PiB0aGlzLnNldFN0YXRlKHsgbW9kZSB9KVxuXG4gIG9uRHJhZ0VuZCA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAodGhpcy5zdGF0ZS5waXhlbENyb3ApIHtcbiAgICAgIGNvbnN0IGNyb3BwZWRJbWcgPSBhd2FpdCBnZXRDcm9wcGVkSW1nKHRoaXMuc3RhdGUuZGF0YVVSTCwgdGhpcy5zdGF0ZS5waXhlbENyb3ApXG4gICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHsgYmFja2dyb3VuZEltYWdlU2VsZWN0aW9uOiBjcm9wcGVkSW1nIH0pXG4gICAgfVxuICB9XG5cbiAgb25Dcm9wQ2hhbmdlID0gKGNyb3AsIHBpeGVsQ3JvcCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgY3JvcDogeyAuLi5jcm9wLCBhc3BlY3Q6IHRoaXMucHJvcHMuYXNwZWN0UmF0aW8gfSxcbiAgICAgIHBpeGVsQ3JvcCxcbiAgICB9KVxuICB9XG5cbiAgb25JbWFnZUxvYWRlZCA9IGltYWdlID0+IHtcbiAgICBjb25zdCBpbWFnZUFzcGVjdFJhdGlvID0gaW1hZ2Uud2lkdGggLyBpbWFnZS5oZWlnaHRcbiAgICBjb25zdCBpbml0aWFsQ3JvcCA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwLFxuICAgICAgd2lkdGg6IDEwMCxcbiAgICAgIGFzcGVjdDogdGhpcy5wcm9wcy5hc3BlY3RSYXRpbyxcbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGltYWdlQXNwZWN0UmF0aW8sXG4gICAgICBjcm9wOiBtYWtlQXNwZWN0Q3JvcChpbml0aWFsQ3JvcCwgaW1hZ2VBc3BlY3RSYXRpbyksXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZUltYWdlQ2hhbmdlID0gKHVybCwgZGF0YVVSTCwgcGhvdG9ncmFwaGVyKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRhdGFVUkwsIHBob3RvZ3JhcGhlciB9LCAoKSA9PiB7XG4gICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHtcbiAgICAgICAgYmFja2dyb3VuZEltYWdlOiB1cmwsXG4gICAgICAgIGJhY2tncm91bmRJbWFnZVNlbGVjdGlvbjogbnVsbCxcbiAgICAgICAgcGhvdG9ncmFwaGVyLFxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlVVJMSW5wdXQgPSBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCB1cmwgPSBlLnRhcmdldFswXS52YWx1ZVxuICAgIHJldHVybiB0aGlzLmNvbnRleHRcbiAgICAgIC5kb3dubG9hZFRodW1ibmFpbEltYWdlKHsgdXJsIH0pXG4gICAgICAudGhlbihyZXMgPT4gcmVzLmRhdGFVUkwpXG4gICAgICAudGhlbihkYXRhVVJMID0+IHRoaXMuaGFuZGxlSW1hZ2VDaGFuZ2UodXJsLCBkYXRhVVJMKSlcbiAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICBpZiAoZXJyLm1lc3NhZ2UuaW5kZXhPZignTmV0d29yayBFcnJvcicpID4gLTEpIHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGVycm9yOlxuICAgICAgICAgICAgICAnRmV0Y2hpbmcgdGhlIGltYWdlIGZhaWxlZC4gVGhpcyBpcyBwcm9iYWJseSBhIENPUlMtcmVsYXRlZCBpc3N1ZS4gWW91IGNhbiBlaXRoZXIgZW5hYmxlIENPUlMgaW4geW91ciBicm93c2VyLCBvciB1c2UgYW5vdGhlciBpbWFnZS4nLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gIH1cblxuICB1cGxvYWRJbWFnZSA9IGFzeW5jIGUgPT4ge1xuICAgIGNvbnN0IGRhdGFVUkwgPSBhd2FpdCBmaWxlVG9EYXRhVVJMKGUudGFyZ2V0LmZpbGVzWzBdKVxuICAgIHJldHVybiB0aGlzLmhhbmRsZUltYWdlQ2hhbmdlKGRhdGFVUkwsIGRhdGFVUkwpXG4gIH1cblxuICBzZWxlY3RJbWFnZSA9IGFzeW5jIGltYWdlID0+IHtcbiAgICAvLyBUT0RPIHVzZSBSZWFjdCBzdXNwZW5zZSBmb3IgbG9hZGluZyB0aGlzIGFzc2V0XG4gICAgY29uc3QgeyBkYXRhVVJMIH0gPSBhd2FpdCB0aGlzLmNvbnRleHQuZG93bmxvYWRUaHVtYm5haWxJbWFnZShpbWFnZSlcblxuICAgIHRoaXMuaGFuZGxlSW1hZ2VDaGFuZ2UoaW1hZ2UudXJsLCBkYXRhVVJMLCBpbWFnZS5waG90b2dyYXBoZXIpXG4gICAgaWYgKGltYWdlLnBhbGV0dGUgJiYgaW1hZ2UucGFsZXR0ZS5sZW5ndGggJiYgdGhpcy5nZW5lcmF0ZUNvbG9yUGFsZXR0ZSkge1xuICAgICAgLypcbiAgICAgICAqIEJhY2tncm91bmQgaXMgZmlyc3QsIHdoaWNoIGlzIGVpdGhlciB0aGUgbGlnaHRlc3Qgb3IgZGFya2VzdCBjb2xvclxuICAgICAgICogYW5kIHRoZSByZXN0IGFyZSBzb3J0ZWQgYnkgaGlnaGVzdCBjb250cmFzdCB3LyB0aGUgYmFja2dyb3VuZFxuICAgICAgICovXG4gICAgICBjb25zdCBwYWxldHRlID0gaW1hZ2UucGFsZXR0ZS5tYXAoYyA9PiBjLmhleClcbiAgICAgIC8qXG4gICAgICAgKiBDb250cmlidXRvcnMsIHBsZWFzZSBmZWVsIGZyZWUgdG8gYWRqdXN0IHRoaXMgYWxnb3JpdGhtIHRvIGNyZWF0ZSB0aGUgbW9zdFxuICAgICAgICogcmVhZGlibGUgb3IgYWVzdGhldGljYWxseSBwbGVhc2luZyBzeW50YXggaGlnaGxpZ2h0aW5nLlxuICAgICAgICovXG4gICAgICB0aGlzLnByb3BzLnVwZGF0ZUhpZ2hsaWdodHMoe1xuICAgICAgICBiYWNrZ3JvdW5kOiBwYWxldHRlWzBdLFxuICAgICAgICB0ZXh0OiBwYWxldHRlWzFdLFxuICAgICAgICB2YXJpYWJsZTogcGFsZXR0ZVsyXSxcbiAgICAgICAgYXR0cmlidXRlOiBwYWxldHRlWzNdLFxuICAgICAgICBkZWZpbml0aW9uOiBwYWxldHRlWzRdLFxuICAgICAgICBrZXl3b3JkOiBwYWxldHRlWzVdLFxuICAgICAgICBwcm9wZXJ0eTogcGFsZXR0ZVs2XSxcbiAgICAgICAgc3RyaW5nOiBwYWxldHRlWzddLFxuICAgICAgICBudW1iZXI6IHBhbGV0dGVbOF0sXG4gICAgICAgIG9wZXJhdG9yOiBwYWxldHRlWzldLFxuICAgICAgICBtZXRhOiBwYWxldHRlWzEwXSxcbiAgICAgICAgdGFnOiBwYWxldHRlWzExXSxcbiAgICAgICAgY29tbWVudDogcGFsZXR0ZVsxMl0sXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIHJlbW92ZUltYWdlID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoSU5JVElBTF9TVEFURSwgKCkgPT4ge1xuICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh7XG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogbnVsbCxcbiAgICAgICAgYmFja2dyb3VuZEltYWdlU2VsZWN0aW9uOiBudWxsLFxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCBjb250ZW50ID0gKFxuICAgICAgPGRpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjaG9vc2UtaW1hZ2VcIj5cbiAgICAgICAgICA8c3Bhbj7kuIrkvKDog4zmma/lm77niYc6PC9zcGFuPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT17dGhpcy5zdGF0ZS5tb2RlID09PSAnZmlsZScgPyAnYWN0aXZlJyA6ICdub25lJ31cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc2VsZWN0TW9kZS5iaW5kKHRoaXMsICdmaWxlJyl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgRmlsZVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT17dGhpcy5zdGF0ZS5tb2RlID09PSAndXJsJyA/ICdhY3RpdmUnIDogJ25vbmUnfVxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5zZWxlY3RNb2RlLmJpbmQodGhpcywgJ3VybCcpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIFVSTFxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIHt0aGlzLnN0YXRlLm1vZGUgPT09ICdmaWxlJyA/IChcbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgICAgICAgIGFjY2VwdD1cImltYWdlL3BuZyxpbWFnZS94LXBuZyxpbWFnZS9qcGVnLGltYWdlL2pwZ1wiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnVwbG9hZEltYWdlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17dGhpcy5oYW5kbGVVUkxJbnB1dH0+XG4gICAgICAgICAgICAgICAgPElucHV0IHR5cGU9XCJ0ZXh0XCIgdGl0bGU9XCJCYWNrZ3JvdW5kIEltYWdlXCIgcGxhY2Vob2xkZXI9XCJJbWFnZSBVUkzigKZcIiBhbGlnbj1cImxlZnRcIiAvPlxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiPlVwbG9hZDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIHt0aGlzLnN0YXRlLmVycm9yICYmIDxzcGFuIGNsYXNzTmFtZT1cImVycm9yXCI+e3RoaXMuc3RhdGUuZXJyb3J9PC9zcGFuPn1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxociAvPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJhbmRvbS1pbWFnZVwiPlxuICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgT3IgdXNlIGEgcmFuZG9tIDxhIGhyZWY9XCJodHRwczovL3Vuc3BsYXNoLmNvbS9cIj5VbnNwbGFzaDwvYT4gaW1hZ2U6XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDxSYW5kb21JbWFnZSBvbkNoYW5nZT17dGhpcy5zZWxlY3RJbWFnZX0gLz5cbiAgICAgICAgICA8R2VuZXJhdGVQYWxldHRlU2V0dGluZyBvbkNoYW5nZT17dmFsdWUgPT4gKHRoaXMuZ2VuZXJhdGVDb2xvclBhbGV0dGUgPSB2YWx1ZSl9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgIHtgXG4gICAgICAgICAgICBidXR0b24ge1xuICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5jaG9vc2UtaW1hZ2UsXG4gICAgICAgICAgICAucmFuZG9tLWltYWdlIHtcbiAgICAgICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuY2hvb3NlLWltYWdlID4gYnV0dG9uIHtcbiAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgICAgIG1hcmdpbjogMCA4cHggOHB4IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5jaG9vc2UtaW1hZ2UgPiBidXR0b246bm90KC5hY3RpdmUpIHtcbiAgICAgICAgICAgICAgb3BhY2l0eTogMC40O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuY2hvb3NlLWltYWdlID4gYnV0dG9uOmZvY3VzIHtcbiAgICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvcm0ge1xuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvcm0gPiBidXR0b24ge1xuICAgICAgICAgICAgICBwYWRkaW5nOiAxcHggMThweCAycHggN3B4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzcGFuIHtcbiAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGEge1xuICAgICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaHIge1xuICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiBub25lO1xuICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwO1xuICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuZXJyb3Ige1xuICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgYH1cbiAgICAgICAgPC9zdHlsZT5cbiAgICAgIDwvZGl2PlxuICAgIClcblxuICAgIGlmICh0aGlzLnN0YXRlLmRhdGFVUkwpIHtcbiAgICAgIGNvbnRlbnQgPSAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2V0dGluZ3MtY29udGFpbmVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbWFnZS1jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGFiZWxcIj5cbiAgICAgICAgICAgICAgPHNwYW4+QmFja2dyb3VuZCBpbWFnZTwvc3Bhbj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0aGlzLnJlbW92ZUltYWdlfT4mdGltZXM7PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxSZWFjdENyb3BcbiAgICAgICAgICAgICAgc3JjPXt0aGlzLnN0YXRlLmRhdGFVUkx9XG4gICAgICAgICAgICAgIG9uSW1hZ2VMb2FkZWQ9e3RoaXMub25JbWFnZUxvYWRlZH1cbiAgICAgICAgICAgICAgY3JvcD17dGhpcy5zdGF0ZS5jcm9wfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkNyb3BDaGFuZ2V9XG4gICAgICAgICAgICAgIG9uRHJhZ0VuZD17dGhpcy5vbkRyYWdFbmR9XG4gICAgICAgICAgICAgIG1pbkhlaWdodD17MTB9XG4gICAgICAgICAgICAgIG1pbldpZHRoPXsxMH1cbiAgICAgICAgICAgICAga2VlcFNlbGVjdGlvblxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIHt0aGlzLnN0YXRlLnBob3RvZ3JhcGhlciAmJiA8UGhvdG9DcmVkaXQgcGhvdG9ncmFwaGVyPXt0aGlzLnN0YXRlLnBob3RvZ3JhcGhlcn0gLz59XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICAgIGNvbG9yOiBpbmhlcml0O1xuICAgICAgICAgICAgICAgIGFwcGVhcmFuY2U6IG5vbmU7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAuc2V0dGluZ3MtY29udGFpbmVyIGltZyB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAubGFiZWwge1xuICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIDpnbG9iYWwoLlJlYWN0Q3JvcF9faW1hZ2UpIHtcbiAgICAgICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgICAgICAgICB1c2VyLWRyYWc6IG5vbmU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAuaW1hZ2UtY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAuaW1hZ2UtY29udGFpbmVyIC5sYWJlbCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYH1cbiAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbWFnZS1waWNrZXItY29udGFpbmVyXCI+XG4gICAgICAgIDxMaW5rIGhyZWY9XCIvc3RhdGljL3JlYWN0LWNyb3AuY3NzXCIgLz5cbiAgICAgICAge2NvbnRlbnR9XG4gICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAge2BcbiAgICAgICAgICAgIC5pbWFnZS1waWNrZXItY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIGB9XG4gICAgICAgIDwvc3R5bGU+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuZnVuY3Rpb24gR2VuZXJhdGVQYWxldHRlU2V0dGluZyh7IG9uQ2hhbmdlIH0pIHtcbiAgY29uc3QgW2VuYWJsZWQsIHNldEVuYWJsZWRdID0gdXNlTG9jYWxTdG9yYWdlKCdDQVJCT05fR0VORVJBVEVfQ09MT1JfUEFMRVRURScpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB2b2lkIG9uQ2hhbmdlKGVuYWJsZWQpLCBbZW5hYmxlZCwgb25DaGFuZ2VdKVxuXG4gIHJldHVybiAoXG4gICAgPFRvZ2dsZVxuICAgICAgbGFiZWw9XCJHZW5lcmF0ZSBjb2xvciBwYWxldHRlIChiZXRhKVwiXG4gICAgICBlbmFibGVkPXtlbmFibGVkfVxuICAgICAgb25DaGFuZ2U9e3NldEVuYWJsZWR9XG4gICAgICBwYWRkaW5nPVwiOHB4IDAgMFwiXG4gICAgLz5cbiAgKVxufVxuIl19 */\\n/*@ sourceURL=/Users/limengyu/Desktop/private/code/project/show-codes/components/ImagePicker.js */\"\n        }, void 0, false, void 0, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"jsx-2400968029\" + \" \" + \"image-picker-container\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        href: \"/static/react-crop.css\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 9\n      }, this), content, /*#__PURE__*/_jsxDEV(_JSXStyle, {\n        id: \"2400968029\",\n        children: \".image-picker-container.jsx-2400968029{font-size:12px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9saW1lbmd5dS9EZXNrdG9wL3ByaXZhdGUvY29kZS9wcm9qZWN0L3Nob3ctY29kZXMvY29tcG9uZW50cy9JbWFnZVBpY2tlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFzVlcsQUFHOEIsZUFDakIiLCJmaWxlIjoiL1VzZXJzL2xpbWVuZ3l1L0Rlc2t0b3AvcHJpdmF0ZS9jb2RlL3Byb2plY3Qvc2hvdy1jb2Rlcy9jb21wb25lbnRzL0ltYWdlUGlja2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IFJlYWN0Q3JvcCwgeyBtYWtlQXNwZWN0Q3JvcCB9IGZyb20gJ3JlYWN0LWltYWdlLWNyb3AnXG5pbXBvcnQgeyB1c2VMb2NhbFN0b3JhZ2UgfSBmcm9tICdhY3Rpb25zYWNrJ1xuXG5pbXBvcnQgUmFuZG9tSW1hZ2UgZnJvbSAnLi9SYW5kb21JbWFnZSdcbmltcG9ydCBQaG90b0NyZWRpdCBmcm9tICcuL1Bob3RvQ3JlZGl0J1xuaW1wb3J0IElucHV0IGZyb20gJy4vSW5wdXQnXG5pbXBvcnQgVG9nZ2xlIGZyb20gJy4vVG9nZ2xlJ1xuaW1wb3J0IHsgTGluayB9IGZyb20gJy4vTWV0YSdcbmltcG9ydCB7IGZpbGVUb0RhdGFVUkwgfSBmcm9tICcuLi9saWIvdXRpbCdcbmltcG9ydCBBcGlDb250ZXh0IGZyb20gJy4vQXBpQ29udGV4dCdcblxuY29uc3QgZ2V0Q3JvcHBlZEltZyA9IChpbWFnZURhdGFVUkwsIHBpeGVsQ3JvcCkgPT4ge1xuICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKVxuICBjYW52YXMud2lkdGggPSBwaXhlbENyb3Aud2lkdGhcbiAgY2FudmFzLmhlaWdodCA9IHBpeGVsQ3JvcC5oZWlnaHRcbiAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJylcblxuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKVxuICAgIGltYWdlLnNyYyA9IGltYWdlRGF0YVVSTFxuICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIGN0eC5kcmF3SW1hZ2UoXG4gICAgICAgIGltYWdlLFxuICAgICAgICBwaXhlbENyb3AueCxcbiAgICAgICAgcGl4ZWxDcm9wLnksXG4gICAgICAgIHBpeGVsQ3JvcC53aWR0aCxcbiAgICAgICAgcGl4ZWxDcm9wLmhlaWdodCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgcGl4ZWxDcm9wLndpZHRoLFxuICAgICAgICBwaXhlbENyb3AuaGVpZ2h0XG4gICAgICApXG5cbiAgICAgIHJlc29sdmUoY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvanBlZycpKVxuICAgIH1cbiAgfSlcbn1cblxuY29uc3QgSU5JVElBTF9TVEFURSA9IHtcbiAgbW9kZTogJ2ZpbGUnLFxuICBjcm9wOiBudWxsLFxuICBpbWFnZUFzcGVjdFJhdGlvOiBudWxsLFxuICBwaXhlbENyb3A6IG51bGwsXG4gIHBob3RvZ3JhcGhlcjogbnVsbCxcbiAgZGF0YVVSTDogbnVsbCxcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW1hZ2VQaWNrZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgY29udGV4dFR5cGUgPSBBcGlDb250ZXh0XG4gIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBzdGF0ZSkge1xuICAgIGlmIChzdGF0ZS5jcm9wKSB7XG4gICAgICAvLyB1cGRhdGUgY3JvcCBmb3IgZWRpdG9yIGNvbnRhaW5lciBhc3BlY3QtcmF0aW8gY2hhbmdlXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjcm9wOiBtYWtlQXNwZWN0Q3JvcChcbiAgICAgICAgICB7XG4gICAgICAgICAgICAuLi5zdGF0ZS5jcm9wLFxuICAgICAgICAgICAgYXNwZWN0OiBuZXh0UHJvcHMuYXNwZWN0UmF0aW8sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdGF0ZS5pbWFnZUFzcGVjdFJhdGlvXG4gICAgICAgICksXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzdGF0ZSA9IElOSVRJQUxfU1RBVEVcblxuICBzZWxlY3RNb2RlID0gbW9kZSA9PiB0aGlzLnNldFN0YXRlKHsgbW9kZSB9KVxuXG4gIG9uRHJhZ0VuZCA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAodGhpcy5zdGF0ZS5waXhlbENyb3ApIHtcbiAgICAgIGNvbnN0IGNyb3BwZWRJbWcgPSBhd2FpdCBnZXRDcm9wcGVkSW1nKHRoaXMuc3RhdGUuZGF0YVVSTCwgdGhpcy5zdGF0ZS5waXhlbENyb3ApXG4gICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHsgYmFja2dyb3VuZEltYWdlU2VsZWN0aW9uOiBjcm9wcGVkSW1nIH0pXG4gICAgfVxuICB9XG5cbiAgb25Dcm9wQ2hhbmdlID0gKGNyb3AsIHBpeGVsQ3JvcCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgY3JvcDogeyAuLi5jcm9wLCBhc3BlY3Q6IHRoaXMucHJvcHMuYXNwZWN0UmF0aW8gfSxcbiAgICAgIHBpeGVsQ3JvcCxcbiAgICB9KVxuICB9XG5cbiAgb25JbWFnZUxvYWRlZCA9IGltYWdlID0+IHtcbiAgICBjb25zdCBpbWFnZUFzcGVjdFJhdGlvID0gaW1hZ2Uud2lkdGggLyBpbWFnZS5oZWlnaHRcbiAgICBjb25zdCBpbml0aWFsQ3JvcCA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwLFxuICAgICAgd2lkdGg6IDEwMCxcbiAgICAgIGFzcGVjdDogdGhpcy5wcm9wcy5hc3BlY3RSYXRpbyxcbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGltYWdlQXNwZWN0UmF0aW8sXG4gICAgICBjcm9wOiBtYWtlQXNwZWN0Q3JvcChpbml0aWFsQ3JvcCwgaW1hZ2VBc3BlY3RSYXRpbyksXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZUltYWdlQ2hhbmdlID0gKHVybCwgZGF0YVVSTCwgcGhvdG9ncmFwaGVyKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRhdGFVUkwsIHBob3RvZ3JhcGhlciB9LCAoKSA9PiB7XG4gICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHtcbiAgICAgICAgYmFja2dyb3VuZEltYWdlOiB1cmwsXG4gICAgICAgIGJhY2tncm91bmRJbWFnZVNlbGVjdGlvbjogbnVsbCxcbiAgICAgICAgcGhvdG9ncmFwaGVyLFxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlVVJMSW5wdXQgPSBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCB1cmwgPSBlLnRhcmdldFswXS52YWx1ZVxuICAgIHJldHVybiB0aGlzLmNvbnRleHRcbiAgICAgIC5kb3dubG9hZFRodW1ibmFpbEltYWdlKHsgdXJsIH0pXG4gICAgICAudGhlbihyZXMgPT4gcmVzLmRhdGFVUkwpXG4gICAgICAudGhlbihkYXRhVVJMID0+IHRoaXMuaGFuZGxlSW1hZ2VDaGFuZ2UodXJsLCBkYXRhVVJMKSlcbiAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICBpZiAoZXJyLm1lc3NhZ2UuaW5kZXhPZignTmV0d29yayBFcnJvcicpID4gLTEpIHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGVycm9yOlxuICAgICAgICAgICAgICAnRmV0Y2hpbmcgdGhlIGltYWdlIGZhaWxlZC4gVGhpcyBpcyBwcm9iYWJseSBhIENPUlMtcmVsYXRlZCBpc3N1ZS4gWW91IGNhbiBlaXRoZXIgZW5hYmxlIENPUlMgaW4geW91ciBicm93c2VyLCBvciB1c2UgYW5vdGhlciBpbWFnZS4nLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gIH1cblxuICB1cGxvYWRJbWFnZSA9IGFzeW5jIGUgPT4ge1xuICAgIGNvbnN0IGRhdGFVUkwgPSBhd2FpdCBmaWxlVG9EYXRhVVJMKGUudGFyZ2V0LmZpbGVzWzBdKVxuICAgIHJldHVybiB0aGlzLmhhbmRsZUltYWdlQ2hhbmdlKGRhdGFVUkwsIGRhdGFVUkwpXG4gIH1cblxuICBzZWxlY3RJbWFnZSA9IGFzeW5jIGltYWdlID0+IHtcbiAgICAvLyBUT0RPIHVzZSBSZWFjdCBzdXNwZW5zZSBmb3IgbG9hZGluZyB0aGlzIGFzc2V0XG4gICAgY29uc3QgeyBkYXRhVVJMIH0gPSBhd2FpdCB0aGlzLmNvbnRleHQuZG93bmxvYWRUaHVtYm5haWxJbWFnZShpbWFnZSlcblxuICAgIHRoaXMuaGFuZGxlSW1hZ2VDaGFuZ2UoaW1hZ2UudXJsLCBkYXRhVVJMLCBpbWFnZS5waG90b2dyYXBoZXIpXG4gICAgaWYgKGltYWdlLnBhbGV0dGUgJiYgaW1hZ2UucGFsZXR0ZS5sZW5ndGggJiYgdGhpcy5nZW5lcmF0ZUNvbG9yUGFsZXR0ZSkge1xuICAgICAgLypcbiAgICAgICAqIEJhY2tncm91bmQgaXMgZmlyc3QsIHdoaWNoIGlzIGVpdGhlciB0aGUgbGlnaHRlc3Qgb3IgZGFya2VzdCBjb2xvclxuICAgICAgICogYW5kIHRoZSByZXN0IGFyZSBzb3J0ZWQgYnkgaGlnaGVzdCBjb250cmFzdCB3LyB0aGUgYmFja2dyb3VuZFxuICAgICAgICovXG4gICAgICBjb25zdCBwYWxldHRlID0gaW1hZ2UucGFsZXR0ZS5tYXAoYyA9PiBjLmhleClcbiAgICAgIC8qXG4gICAgICAgKiBDb250cmlidXRvcnMsIHBsZWFzZSBmZWVsIGZyZWUgdG8gYWRqdXN0IHRoaXMgYWxnb3JpdGhtIHRvIGNyZWF0ZSB0aGUgbW9zdFxuICAgICAgICogcmVhZGlibGUgb3IgYWVzdGhldGljYWxseSBwbGVhc2luZyBzeW50YXggaGlnaGxpZ2h0aW5nLlxuICAgICAgICovXG4gICAgICB0aGlzLnByb3BzLnVwZGF0ZUhpZ2hsaWdodHMoe1xuICAgICAgICBiYWNrZ3JvdW5kOiBwYWxldHRlWzBdLFxuICAgICAgICB0ZXh0OiBwYWxldHRlWzFdLFxuICAgICAgICB2YXJpYWJsZTogcGFsZXR0ZVsyXSxcbiAgICAgICAgYXR0cmlidXRlOiBwYWxldHRlWzNdLFxuICAgICAgICBkZWZpbml0aW9uOiBwYWxldHRlWzRdLFxuICAgICAgICBrZXl3b3JkOiBwYWxldHRlWzVdLFxuICAgICAgICBwcm9wZXJ0eTogcGFsZXR0ZVs2XSxcbiAgICAgICAgc3RyaW5nOiBwYWxldHRlWzddLFxuICAgICAgICBudW1iZXI6IHBhbGV0dGVbOF0sXG4gICAgICAgIG9wZXJhdG9yOiBwYWxldHRlWzldLFxuICAgICAgICBtZXRhOiBwYWxldHRlWzEwXSxcbiAgICAgICAgdGFnOiBwYWxldHRlWzExXSxcbiAgICAgICAgY29tbWVudDogcGFsZXR0ZVsxMl0sXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIHJlbW92ZUltYWdlID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoSU5JVElBTF9TVEFURSwgKCkgPT4ge1xuICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh7XG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogbnVsbCxcbiAgICAgICAgYmFja2dyb3VuZEltYWdlU2VsZWN0aW9uOiBudWxsLFxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCBjb250ZW50ID0gKFxuICAgICAgPGRpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjaG9vc2UtaW1hZ2VcIj5cbiAgICAgICAgICA8c3Bhbj7kuIrkvKDog4zmma/lm77niYc6PC9zcGFuPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT17dGhpcy5zdGF0ZS5tb2RlID09PSAnZmlsZScgPyAnYWN0aXZlJyA6ICdub25lJ31cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc2VsZWN0TW9kZS5iaW5kKHRoaXMsICdmaWxlJyl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgRmlsZVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT17dGhpcy5zdGF0ZS5tb2RlID09PSAndXJsJyA/ICdhY3RpdmUnIDogJ25vbmUnfVxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5zZWxlY3RNb2RlLmJpbmQodGhpcywgJ3VybCcpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIFVSTFxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIHt0aGlzLnN0YXRlLm1vZGUgPT09ICdmaWxlJyA/IChcbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgICAgICAgIGFjY2VwdD1cImltYWdlL3BuZyxpbWFnZS94LXBuZyxpbWFnZS9qcGVnLGltYWdlL2pwZ1wiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnVwbG9hZEltYWdlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17dGhpcy5oYW5kbGVVUkxJbnB1dH0+XG4gICAgICAgICAgICAgICAgPElucHV0IHR5cGU9XCJ0ZXh0XCIgdGl0bGU9XCJCYWNrZ3JvdW5kIEltYWdlXCIgcGxhY2Vob2xkZXI9XCJJbWFnZSBVUkzigKZcIiBhbGlnbj1cImxlZnRcIiAvPlxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiPlVwbG9hZDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIHt0aGlzLnN0YXRlLmVycm9yICYmIDxzcGFuIGNsYXNzTmFtZT1cImVycm9yXCI+e3RoaXMuc3RhdGUuZXJyb3J9PC9zcGFuPn1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxociAvPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJhbmRvbS1pbWFnZVwiPlxuICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgT3IgdXNlIGEgcmFuZG9tIDxhIGhyZWY9XCJodHRwczovL3Vuc3BsYXNoLmNvbS9cIj5VbnNwbGFzaDwvYT4gaW1hZ2U6XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDxSYW5kb21JbWFnZSBvbkNoYW5nZT17dGhpcy5zZWxlY3RJbWFnZX0gLz5cbiAgICAgICAgICA8R2VuZXJhdGVQYWxldHRlU2V0dGluZyBvbkNoYW5nZT17dmFsdWUgPT4gKHRoaXMuZ2VuZXJhdGVDb2xvclBhbGV0dGUgPSB2YWx1ZSl9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgIHtgXG4gICAgICAgICAgICBidXR0b24ge1xuICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5jaG9vc2UtaW1hZ2UsXG4gICAgICAgICAgICAucmFuZG9tLWltYWdlIHtcbiAgICAgICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuY2hvb3NlLWltYWdlID4gYnV0dG9uIHtcbiAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgICAgIG1hcmdpbjogMCA4cHggOHB4IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5jaG9vc2UtaW1hZ2UgPiBidXR0b246bm90KC5hY3RpdmUpIHtcbiAgICAgICAgICAgICAgb3BhY2l0eTogMC40O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuY2hvb3NlLWltYWdlID4gYnV0dG9uOmZvY3VzIHtcbiAgICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvcm0ge1xuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvcm0gPiBidXR0b24ge1xuICAgICAgICAgICAgICBwYWRkaW5nOiAxcHggMThweCAycHggN3B4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzcGFuIHtcbiAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGEge1xuICAgICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaHIge1xuICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiBub25lO1xuICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwO1xuICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuZXJyb3Ige1xuICAgICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgYH1cbiAgICAgICAgPC9zdHlsZT5cbiAgICAgIDwvZGl2PlxuICAgIClcblxuICAgIGlmICh0aGlzLnN0YXRlLmRhdGFVUkwpIHtcbiAgICAgIGNvbnRlbnQgPSAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2V0dGluZ3MtY29udGFpbmVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbWFnZS1jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGFiZWxcIj5cbiAgICAgICAgICAgICAgPHNwYW4+QmFja2dyb3VuZCBpbWFnZTwvc3Bhbj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0aGlzLnJlbW92ZUltYWdlfT4mdGltZXM7PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxSZWFjdENyb3BcbiAgICAgICAgICAgICAgc3JjPXt0aGlzLnN0YXRlLmRhdGFVUkx9XG4gICAgICAgICAgICAgIG9uSW1hZ2VMb2FkZWQ9e3RoaXMub25JbWFnZUxvYWRlZH1cbiAgICAgICAgICAgICAgY3JvcD17dGhpcy5zdGF0ZS5jcm9wfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkNyb3BDaGFuZ2V9XG4gICAgICAgICAgICAgIG9uRHJhZ0VuZD17dGhpcy5vbkRyYWdFbmR9XG4gICAgICAgICAgICAgIG1pbkhlaWdodD17MTB9XG4gICAgICAgICAgICAgIG1pbldpZHRoPXsxMH1cbiAgICAgICAgICAgICAga2VlcFNlbGVjdGlvblxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIHt0aGlzLnN0YXRlLnBob3RvZ3JhcGhlciAmJiA8UGhvdG9DcmVkaXQgcGhvdG9ncmFwaGVyPXt0aGlzLnN0YXRlLnBob3RvZ3JhcGhlcn0gLz59XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICAgIGNvbG9yOiBpbmhlcml0O1xuICAgICAgICAgICAgICAgIGFwcGVhcmFuY2U6IG5vbmU7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAuc2V0dGluZ3MtY29udGFpbmVyIGltZyB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAubGFiZWwge1xuICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIDpnbG9iYWwoLlJlYWN0Q3JvcF9faW1hZ2UpIHtcbiAgICAgICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgICAgICAgICB1c2VyLWRyYWc6IG5vbmU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAuaW1hZ2UtY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAuaW1hZ2UtY29udGFpbmVyIC5sYWJlbCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYH1cbiAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbWFnZS1waWNrZXItY29udGFpbmVyXCI+XG4gICAgICAgIDxMaW5rIGhyZWY9XCIvc3RhdGljL3JlYWN0LWNyb3AuY3NzXCIgLz5cbiAgICAgICAge2NvbnRlbnR9XG4gICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAge2BcbiAgICAgICAgICAgIC5pbWFnZS1waWNrZXItY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIGB9XG4gICAgICAgIDwvc3R5bGU+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuZnVuY3Rpb24gR2VuZXJhdGVQYWxldHRlU2V0dGluZyh7IG9uQ2hhbmdlIH0pIHtcbiAgY29uc3QgW2VuYWJsZWQsIHNldEVuYWJsZWRdID0gdXNlTG9jYWxTdG9yYWdlKCdDQVJCT05fR0VORVJBVEVfQ09MT1JfUEFMRVRURScpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB2b2lkIG9uQ2hhbmdlKGVuYWJsZWQpLCBbZW5hYmxlZCwgb25DaGFuZ2VdKVxuXG4gIHJldHVybiAoXG4gICAgPFRvZ2dsZVxuICAgICAgbGFiZWw9XCJHZW5lcmF0ZSBjb2xvciBwYWxldHRlIChiZXRhKVwiXG4gICAgICBlbmFibGVkPXtlbmFibGVkfVxuICAgICAgb25DaGFuZ2U9e3NldEVuYWJsZWR9XG4gICAgICBwYWRkaW5nPVwiOHB4IDAgMFwiXG4gICAgLz5cbiAgKVxufVxuIl19 */\\n/*@ sourceURL=/Users/limengyu/Desktop/private/code/project/show-codes/components/ImagePicker.js */\"\n      }, void 0, false, void 0, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\n_defineProperty(ImagePicker, \"contextType\", ApiContext);\n\nfunction GeneratePaletteSetting({\n  onChange\n}) {\n  const [enabled, setEnabled] = useLocalStorage('CARBON_GENERATE_COLOR_PALETTE');\n  React.useEffect(() => void onChange(enabled), [enabled, onChange]);\n  return /*#__PURE__*/_jsxDEV(Toggle, {\n    label: \"Generate color palette (beta)\",\n    enabled: enabled,\n    onChange: setEnabled,\n    padding: \"8px 0 0\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 359,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/Users/limengyu/Desktop/private/code/project/show-codes/components/ImagePicker.js"],"names":["React","ReactCrop","makeAspectCrop","useLocalStorage","RandomImage","PhotoCredit","Input","Toggle","Link","fileToDataURL","ApiContext","getCroppedImg","imageDataURL","pixelCrop","canvas","document","createElement","width","height","ctx","getContext","Promise","resolve","image","Image","src","onload","drawImage","x","y","toDataURL","INITIAL_STATE","mode","crop","imageAspectRatio","photographer","dataURL","ImagePicker","Component","setState","state","croppedImg","props","onChange","backgroundImageSelection","aspect","aspectRatio","initialCrop","url","backgroundImage","e","preventDefault","target","value","context","downloadThumbnailImage","then","res","handleImageChange","catch","err","message","indexOf","error","files","palette","length","generateColorPalette","map","c","hex","updateHighlights","background","text","variable","attribute","definition","keyword","property","string","number","operator","meta","tag","comment","getDerivedStateFromProps","nextProps","render","content","selectMode","bind","uploadImage","handleURLInput","selectImage","removeImage","onImageLoaded","onCropChange","onDragEnd","GeneratePaletteSetting","enabled","setEnabled","useEffect"],"mappings":"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","sourcesContent":["import React from 'react'\nimport ReactCrop, { makeAspectCrop } from 'react-image-crop'\nimport { useLocalStorage } from 'actionsack'\n\nimport RandomImage from './RandomImage'\nimport PhotoCredit from './PhotoCredit'\nimport Input from './Input'\nimport Toggle from './Toggle'\nimport { Link } from './Meta'\nimport { fileToDataURL } from '../lib/util'\nimport ApiContext from './ApiContext'\n\nconst getCroppedImg = (imageDataURL, pixelCrop) => {\n  const canvas = document.createElement('canvas')\n  canvas.width = pixelCrop.width\n  canvas.height = pixelCrop.height\n  const ctx = canvas.getContext('2d')\n\n  return new Promise(resolve => {\n    const image = new Image()\n    image.src = imageDataURL\n    image.onload = () => {\n      ctx.drawImage(\n        image,\n        pixelCrop.x,\n        pixelCrop.y,\n        pixelCrop.width,\n        pixelCrop.height,\n        0,\n        0,\n        pixelCrop.width,\n        pixelCrop.height\n      )\n\n      resolve(canvas.toDataURL('image/jpeg'))\n    }\n  })\n}\n\nconst INITIAL_STATE = {\n  mode: 'file',\n  crop: null,\n  imageAspectRatio: null,\n  pixelCrop: null,\n  photographer: null,\n  dataURL: null,\n}\n\nexport default class ImagePicker extends React.Component {\n  static contextType = ApiContext\n  static getDerivedStateFromProps(nextProps, state) {\n    if (state.crop) {\n      // update crop for editor container aspect-ratio change\n      return {\n        crop: makeAspectCrop(\n          {\n            ...state.crop,\n            aspect: nextProps.aspectRatio,\n          },\n          state.imageAspectRatio\n        ),\n      }\n    }\n    return null\n  }\n\n  state = INITIAL_STATE\n\n  selectMode = mode => this.setState({ mode })\n\n  onDragEnd = async () => {\n    if (this.state.pixelCrop) {\n      const croppedImg = await getCroppedImg(this.state.dataURL, this.state.pixelCrop)\n      this.props.onChange({ backgroundImageSelection: croppedImg })\n    }\n  }\n\n  onCropChange = (crop, pixelCrop) => {\n    this.setState({\n      crop: { ...crop, aspect: this.props.aspectRatio },\n      pixelCrop,\n    })\n  }\n\n  onImageLoaded = image => {\n    const imageAspectRatio = image.width / image.height\n    const initialCrop = {\n      x: 0,\n      y: 0,\n      width: 100,\n      aspect: this.props.aspectRatio,\n    }\n\n    this.setState({\n      imageAspectRatio,\n      crop: makeAspectCrop(initialCrop, imageAspectRatio),\n    })\n  }\n\n  handleImageChange = (url, dataURL, photographer) => {\n    this.setState({ dataURL, photographer }, () => {\n      this.props.onChange({\n        backgroundImage: url,\n        backgroundImageSelection: null,\n        photographer,\n      })\n    })\n  }\n\n  handleURLInput = e => {\n    e.preventDefault()\n    const url = e.target[0].value\n    return this.context\n      .downloadThumbnailImage({ url })\n      .then(res => res.dataURL)\n      .then(dataURL => this.handleImageChange(url, dataURL))\n      .catch(err => {\n        if (err.message.indexOf('Network Error') > -1) {\n          this.setState({\n            error:\n              'Fetching the image failed. This is probably a CORS-related issue. You can either enable CORS in your browser, or use another image.',\n          })\n        }\n      })\n  }\n\n  uploadImage = async e => {\n    const dataURL = await fileToDataURL(e.target.files[0])\n    return this.handleImageChange(dataURL, dataURL)\n  }\n\n  selectImage = async image => {\n    // TODO use React suspense for loading this asset\n    const { dataURL } = await this.context.downloadThumbnailImage(image)\n\n    this.handleImageChange(image.url, dataURL, image.photographer)\n    if (image.palette && image.palette.length && this.generateColorPalette) {\n      /*\n       * Background is first, which is either the lightest or darkest color\n       * and the rest are sorted by highest contrast w/ the background\n       */\n      const palette = image.palette.map(c => c.hex)\n      /*\n       * Contributors, please feel free to adjust this algorithm to create the most\n       * readible or aesthetically pleasing syntax highlighting.\n       */\n      this.props.updateHighlights({\n        background: palette[0],\n        text: palette[1],\n        variable: palette[2],\n        attribute: palette[3],\n        definition: palette[4],\n        keyword: palette[5],\n        property: palette[6],\n        string: palette[7],\n        number: palette[8],\n        operator: palette[9],\n        meta: palette[10],\n        tag: palette[11],\n        comment: palette[12],\n      })\n    }\n  }\n\n  removeImage = () => {\n    this.setState(INITIAL_STATE, () => {\n      this.props.onChange({\n        backgroundImage: null,\n        backgroundImageSelection: null,\n      })\n    })\n  }\n\n  render() {\n    let content = (\n      <div>\n        <div className=\"choose-image\">\n          <span>:</span>\n          <button\n            className={this.state.mode === 'file' ? 'active' : 'none'}\n            onClick={this.selectMode.bind(this, 'file')}\n          >\n            File\n          </button>\n          <button\n            className={this.state.mode === 'url' ? 'active' : 'none'}\n            onClick={this.selectMode.bind(this, 'url')}\n          >\n            URL\n          </button>\n          {this.state.mode === 'file' ? (\n            <Input\n              type=\"file\"\n              accept=\"image/png,image/x-png,image/jpeg,image/jpg\"\n              onChange={this.uploadImage}\n            />\n          ) : (\n              <form onSubmit={this.handleURLInput}>\n                <Input type=\"text\" title=\"Background Image\" placeholder=\"Image URL\" align=\"left\" />\n                <button type=\"submit\">Upload</button>\n              </form>\n            )}\n          {this.state.error && <span className=\"error\">{this.state.error}</span>}\n        </div>\n        <hr />\n        <div className=\"random-image\">\n          <span>\n            Or use a random <a href=\"https://unsplash.com/\">Unsplash</a> image:\n          </span>\n          <RandomImage onChange={this.selectImage} />\n          <GeneratePaletteSetting onChange={value => (this.generateColorPalette = value)} />\n        </div>\n        <style jsx>\n          {`\n            button {\n              display: inline-block;\n            }\n\n            .choose-image,\n            .random-image {\n              padding: 8px;\n            }\n\n            .choose-image > button {\n              cursor: pointer;\n              color: white;\n              background: transparent;\n              border: none;\n              outline: none;\n              padding: 0;\n              margin: 0 8px 8px 0;\n            }\n\n            .choose-image > button:not(.active) {\n              opacity: 0.4;\n            }\n\n            .choose-image > button:focus {\n              text-decoration: underline;\n            }\n\n            form {\n              display: flex;\n              justify-content: space-between;\n            }\n\n            form > button {\n              padding: 1px 18px 2px 7px;\n            }\n\n            span {\n              display: block;\n              margin-bottom: 16px;\n            }\n\n            a {\n              text-decoration: underline;\n            }\n\n            hr {\n              border-bottom: none;\n              margin-bottom: 0;\n              margin-top: 0;\n            }\n\n            .error {\n              color: red;\n              margin-top: 8px;\n            }\n          `}\n        </style>\n      </div>\n    )\n\n    if (this.state.dataURL) {\n      content = (\n        <div className=\"settings-container\">\n          <div className=\"image-container\">\n            <div className=\"label\">\n              <span>Background image</span>\n              <button onClick={this.removeImage}>&times;</button>\n            </div>\n            <ReactCrop\n              src={this.state.dataURL}\n              onImageLoaded={this.onImageLoaded}\n              crop={this.state.crop}\n              onChange={this.onCropChange}\n              onDragEnd={this.onDragEnd}\n              minHeight={10}\n              minWidth={10}\n              keepSelection\n            />\n            {this.state.photographer && <PhotoCredit photographer={this.state.photographer} />}\n          </div>\n          <style jsx>\n            {`\n              button {\n                cursor: pointer;\n                color: inherit;\n                appearance: none;\n                border: none;\n                background: none;\n                display: block;\n                padding: 0;\n                margin: 0;\n                line-height: 16px;\n              }\n\n              .settings-container img {\n                width: 100%;\n              }\n\n              .label {\n                user-select: none;\n                margin-bottom: 4px;\n              }\n\n              :global(.ReactCrop__image) {\n                user-select: none;\n                user-drag: none;\n              }\n\n              .image-container {\n                padding: 8px;\n              }\n\n              .image-container .label {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n              }\n            `}\n          </style>\n        </div>\n      )\n    }\n\n    return (\n      <div className=\"image-picker-container\">\n        <Link href=\"/static/react-crop.css\" />\n        {content}\n        <style jsx>\n          {`\n            .image-picker-container {\n              font-size: 12px;\n            }\n          `}\n        </style>\n      </div>\n    )\n  }\n}\n\nfunction GeneratePaletteSetting({ onChange }) {\n  const [enabled, setEnabled] = useLocalStorage('CARBON_GENERATE_COLOR_PALETTE')\n  React.useEffect(() => void onChange(enabled), [enabled, onChange])\n\n  return (\n    <Toggle\n      label=\"Generate color palette (beta)\"\n      enabled={enabled}\n      onChange={setEnabled}\n      padding=\"8px 0 0\"\n    />\n  )\n}\n"]},"metadata":{},"sourceType":"module"}