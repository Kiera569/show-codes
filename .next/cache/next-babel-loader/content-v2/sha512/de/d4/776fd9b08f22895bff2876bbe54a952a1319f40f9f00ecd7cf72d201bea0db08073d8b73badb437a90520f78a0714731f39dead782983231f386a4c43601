{"ast":null,"code":"import firebase from 'firebase/app';\nimport 'firebase/auth';\n\nif (firebase.apps.length === 0) {\n  if (process.env.NEXT_PUBLIC_FIREBASE_API_KEY && process.env.NEXT_PUBLIC_FIREBASE_FE_APP_ID) {\n    firebase.initializeApp({\n      apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n      authDomain: `${process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID}.firebaseapp.com`,\n      databaseURL: `https://${process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID}.firebaseio.com`,\n      projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n      storageBucket: `${process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID}.appspot.com`,\n      messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n      appId: process.env.NEXT_PUBLIC_FIREBASE_FE_APP_ID\n    });\n  }\n}\n\nexport function logout() {\n  return firebase.auth().signOut().catch(console.error);\n}\nexport function login(provider) {\n  return firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(() => firebase.auth().signInWithPopup(provider)).catch(console.error);\n}\nexport function loginGitHub() {\n  const provider = new firebase.auth.GithubAuthProvider();\n  provider.setCustomParameters({\n    allow_signup: 'true'\n  });\n  return login(provider);\n}\nexport default firebase.apps.length ? firebase : null;","map":{"version":3,"sources":["/Users/limengyu/Desktop/private/code/project/show-codes/lib/client.js"],"names":["firebase","apps","length","process","env","NEXT_PUBLIC_FIREBASE_API_KEY","NEXT_PUBLIC_FIREBASE_FE_APP_ID","initializeApp","apiKey","authDomain","NEXT_PUBLIC_FIREBASE_PROJECT_ID","databaseURL","projectId","storageBucket","messagingSenderId","NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID","appId","logout","auth","signOut","catch","console","error","login","provider","setPersistence","Auth","Persistence","LOCAL","then","signInWithPopup","loginGitHub","GithubAuthProvider","setCustomParameters","allow_signup"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP;;AAEA,IAAIA,QAAQ,CAACC,IAAT,CAAcC,MAAd,KAAyB,CAA7B,EAAgC;AAC9B,MAAIC,OAAO,CAACC,GAAR,CAAYC,4BAAZ,IAA4CF,OAAO,CAACC,GAAR,CAAYE,8BAA5D,EAA4F;AAC1FN,IAAAA,QAAQ,CAACO,aAAT,CAAuB;AACrBC,MAAAA,MAAM,EAAEL,OAAO,CAACC,GAAR,CAAYC,4BADC;AAErBI,MAAAA,UAAU,EAAG,GAAEN,OAAO,CAACC,GAAR,CAAYM,+BAAgC,kBAFtC;AAGrBC,MAAAA,WAAW,EAAG,WAAUR,OAAO,CAACC,GAAR,CAAYM,+BAAgC,iBAH/C;AAIrBE,MAAAA,SAAS,EAAET,OAAO,CAACC,GAAR,CAAYM,+BAJF;AAKrBG,MAAAA,aAAa,EAAG,GAAEV,OAAO,CAACC,GAAR,CAAYM,+BAAgC,cALzC;AAMrBI,MAAAA,iBAAiB,EAAEX,OAAO,CAACC,GAAR,CAAYW,wCANV;AAOrBC,MAAAA,KAAK,EAAEb,OAAO,CAACC,GAAR,CAAYE;AAPE,KAAvB;AASD;AACF;;AAED,OAAO,SAASW,MAAT,GAAkB;AACvB,SAAOjB,QAAQ,CAACkB,IAAT,GAAgBC,OAAhB,GAA0BC,KAA1B,CAAgCC,OAAO,CAACC,KAAxC,CAAP;AACD;AAED,OAAO,SAASC,KAAT,CAAeC,QAAf,EAAyB;AAC9B,SAAOxB,QAAQ,CACZkB,IADI,GAEJO,cAFI,CAEWzB,QAAQ,CAACkB,IAAT,CAAcQ,IAAd,CAAmBC,WAAnB,CAA+BC,KAF1C,EAGJC,IAHI,CAGC,MAAM7B,QAAQ,CAACkB,IAAT,GAAgBY,eAAhB,CAAgCN,QAAhC,CAHP,EAIJJ,KAJI,CAIEC,OAAO,CAACC,KAJV,CAAP;AAKD;AAED,OAAO,SAASS,WAAT,GAAuB;AAC5B,QAAMP,QAAQ,GAAG,IAAIxB,QAAQ,CAACkB,IAAT,CAAcc,kBAAlB,EAAjB;AACAR,EAAAA,QAAQ,CAACS,mBAAT,CAA6B;AAC3BC,IAAAA,YAAY,EAAE;AADa,GAA7B;AAGA,SAAOX,KAAK,CAACC,QAAD,CAAZ;AACD;AAED,eAAexB,QAAQ,CAACC,IAAT,CAAcC,MAAd,GAAuBF,QAAvB,GAAkC,IAAjD","sourcesContent":["import firebase from 'firebase/app'\nimport 'firebase/auth'\n\nif (firebase.apps.length === 0) {\n  if (process.env.NEXT_PUBLIC_FIREBASE_API_KEY && process.env.NEXT_PUBLIC_FIREBASE_FE_APP_ID) {\n    firebase.initializeApp({\n      apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n      authDomain: `${process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID}.firebaseapp.com`,\n      databaseURL: `https://${process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID}.firebaseio.com`,\n      projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n      storageBucket: `${process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID}.appspot.com`,\n      messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n      appId: process.env.NEXT_PUBLIC_FIREBASE_FE_APP_ID,\n    })\n  }\n}\n\nexport function logout() {\n  return firebase.auth().signOut().catch(console.error)\n}\n\nexport function login(provider) {\n  return firebase\n    .auth()\n    .setPersistence(firebase.auth.Auth.Persistence.LOCAL)\n    .then(() => firebase.auth().signInWithPopup(provider))\n    .catch(console.error)\n}\n\nexport function loginGitHub() {\n  const provider = new firebase.auth.GithubAuthProvider()\n  provider.setCustomParameters({\n    allow_signup: 'true',\n  })\n  return login(provider)\n}\n\nexport default firebase.apps.length ? firebase : null\n"]},"metadata":{},"sourceType":"module"}