{"ast":null,"code":"import _defineProperty from \"/Users/limengyu/Desktop/private/code/project/show-codes/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/limengyu/Desktop/private/code/project/show-codes/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/limengyu/Desktop/private/code/project/show-codes/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from 'axios';\nimport debounce from 'lodash.debounce';\nimport omitBy from 'lodash.omitby';\nimport ms from 'ms';\nimport { fileToDataURL } from './util';\nimport firebase from './client';\nimport { DEFAULT_CODE, DEFAULT_SETTINGS } from './constants';\nexport var client = axios.create({\n  baseURL: \"\".concat(process.env.NEXT_PUBLIC_API_URL || '', \"/api\"),\n  headers: {\n    Accept: 'application/json'\n  }\n});\n\nfunction tweet(content, encodedImage) {\n  var processedData = encodedImage.split(',')[1];\n  return client.post('/twitter', {\n    imageData: processedData,\n    altText: content\n  }).then(function (res) {\n    return res.data.url;\n  }).then(function (url) {\n    return encodeURIComponent(\"Created with @carbon_app \".concat(url));\n  }).then(function (uri) {\n    return \"https://twitter.com/intent/tweet?text=\".concat(uri);\n  }).then(openTwitterUrl)[\"catch\"](checkIfRateLimited);\n}\n\nvar RATE_LIMIT_CODE = 420;\n\nfunction checkIfRateLimited(err) {\n  if (err.response.status === RATE_LIMIT_CODE) {\n    alert(\"Oh no! Looks like to many people are trying to tweet right now and we've been rate limited. Try again soon or save and upload manually!\");\n    return;\n  }\n\n  throw err;\n}\n\nfunction image(state) {\n  return client.post('/image', {\n    state: state\n  }).then(function (res) {\n    return res.data;\n  });\n}\n\nfunction openTwitterUrl(twitterUrl) {\n  var width = 575;\n  var height = 400;\n  var left = (window.outerWidth - width) / 2;\n  var top = (window.outerHeight - height) / 2;\n  var opts = \"status=1,width=\".concat(width, \",height=\").concat(height, \",top=\").concat(top, \",left=\").concat(left);\n  window.open(twitterUrl, '_blank', opts);\n}\n\nvar downloadThumbnailImage = function downloadThumbnailImage(img) {\n  return client.get(img.url.replace('http://', 'https://'), {\n    responseType: 'blob'\n  }).then(function (res) {\n    return res.data;\n  }).then(fileToDataURL).then(function (dataURL) {\n    return Object.assign(img, {\n      dataURL: dataURL\n    });\n  });\n};\n\nvar unsplash = {\n  download: function download(id) {\n    return client.get(\"/unsplash/download/\".concat(id)).then(function (res) {\n      return res.data;\n    });\n  },\n  random: function random() {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var imageUrls;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return client.get('/unsplash/random');\n\n            case 2:\n              imageUrls = _context.sent;\n              return _context.abrupt(\"return\", Promise.all(imageUrls.data.map(downloadThumbnailImage)));\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  }\n};\n\nfunction getSnippet() {\n  var uid = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      host = _ref.host,\n      filename = _ref.filename;\n\n  return client.get(\"/snippets/\".concat(uid), {\n    baseURL: host ? \"https://\".concat(host, \"/api\") : undefined,\n    params: {\n      filename: filename\n    }\n  }).then(function (res) {\n    return res.data;\n  })[\"catch\"](function (e) {\n    console.error(e);\n    return null;\n  });\n}\n\nfunction listSnippets(page) {\n  // IDEA: move into axios interceptor\n  return firebase.auth().currentUser.getIdToken().then(function (authorization) {\n    return client.get(\"/snippets\", {\n      params: {\n        page: page\n      },\n      headers: {\n        authorization: authorization\n      }\n    }).then(function (res) {\n      return res.data;\n    })[\"catch\"](function (e) {\n      console.error(e);\n      throw e;\n    });\n  });\n}\n\nfunction isNotDefaultSetting(v, k) {\n  return v === DEFAULT_SETTINGS[k] || !Object.prototype.hasOwnProperty.call(DEFAULT_SETTINGS, k);\n}\n\nfunction updateSnippet(uid, state) {\n  var sanitized = omitBy(state, isNotDefaultSetting);\n\n  var data = _objectSpread(_objectSpread({}, sanitized), {}, {\n    code: state.code != null ? state.code : DEFAULT_CODE\n  });\n\n  if (uid) {\n    return client.patch(\"/snippets/\".concat(uid), data).then(function (res) {\n      return res.data;\n    })[\"catch\"](function (e) {\n      console.error(e);\n      return null;\n    });\n  }\n\n  return client.post(\"/snippets\", data).then(function (res) {\n    return res.data;\n  })[\"catch\"](function (e) {\n    console.error(e);\n    return null;\n  });\n}\n\nfunction deleteSnippet(uid) {\n  return client[\"delete\"](\"/snippets/\".concat(uid)).then(function (res) {\n    return res.data;\n  })[\"catch\"](function (e) {\n    console.error(e);\n    return null;\n  });\n}\n\nvar createSnippet = debounce(function (data) {\n  return updateSnippet(null, data);\n}, ms('5s'), {\n  leading: true,\n  trailing: false\n});\nexport default {\n  snippet: {\n    get: getSnippet,\n    list: listSnippets,\n    update: debounce(updateSnippet, ms('1s'), {\n      leading: true,\n      trailing: true\n    }),\n    create: createSnippet,\n    \"delete\": function _delete(id) {\n      return deleteSnippet(id);\n    }\n  },\n  tweet: debounce(tweet, ms('5s'), {\n    leading: true,\n    trailing: false\n  }),\n  image: debounce(image, ms('5s'), {\n    leading: true,\n    trailing: false\n  }),\n  unsplash: unsplash,\n  downloadThumbnailImage: downloadThumbnailImage\n};","map":{"version":3,"sources":["/Users/limengyu/Desktop/private/code/project/show-codes/lib/api.js"],"names":["axios","debounce","omitBy","ms","fileToDataURL","firebase","DEFAULT_CODE","DEFAULT_SETTINGS","client","create","baseURL","process","env","NEXT_PUBLIC_API_URL","headers","Accept","tweet","content","encodedImage","processedData","split","post","imageData","altText","then","res","data","url","encodeURIComponent","uri","openTwitterUrl","checkIfRateLimited","RATE_LIMIT_CODE","err","response","status","alert","image","state","twitterUrl","width","height","left","window","outerWidth","top","outerHeight","opts","open","downloadThumbnailImage","img","get","replace","responseType","dataURL","Object","assign","unsplash","download","id","random","imageUrls","Promise","all","map","getSnippet","uid","host","filename","undefined","params","e","console","error","listSnippets","page","auth","currentUser","getIdToken","authorization","isNotDefaultSetting","v","k","prototype","hasOwnProperty","call","updateSnippet","sanitized","code","patch","deleteSnippet","createSnippet","leading","trailing","snippet","list","update"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport debounce from 'lodash.debounce'\nimport omitBy from 'lodash.omitby'\nimport ms from 'ms'\n\nimport { fileToDataURL } from './util'\nimport firebase from './client'\nimport { DEFAULT_CODE, DEFAULT_SETTINGS } from './constants'\n\nexport const client = axios.create({\n  baseURL: `${process.env.NEXT_PUBLIC_API_URL || ''}/api`,\n  headers: {\n    Accept: 'application/json',\n  },\n})\n\nfunction tweet(content, encodedImage) {\n  const processedData = encodedImage.split(',')[1]\n\n  return client\n    .post('/twitter', {\n      imageData: processedData,\n      altText: content,\n    })\n    .then(res => res.data.url)\n    .then(url => encodeURIComponent(`Created with @carbon_app ${url}`))\n    .then(uri => `https://twitter.com/intent/tweet?text=${uri}`)\n    .then(openTwitterUrl)\n    .catch(checkIfRateLimited)\n}\n\nconst RATE_LIMIT_CODE = 420\nfunction checkIfRateLimited(err) {\n  if (err.response.status === RATE_LIMIT_CODE) {\n    alert(\n      \"Oh no! Looks like to many people are trying to tweet right now and we've been rate limited. Try again soon or save and upload manually!\"\n    )\n    return\n  }\n\n  throw err\n}\n\nfunction image(state) {\n  return client.post('/image', { state }).then(res => res.data)\n}\n\nfunction openTwitterUrl(twitterUrl) {\n  const width = 575\n  const height = 400\n  const left = (window.outerWidth - width) / 2\n  const top = (window.outerHeight - height) / 2\n  const opts = `status=1,width=${width},height=${height},top=${top},left=${left}`\n\n  window.open(twitterUrl, '_blank', opts)\n}\n\nconst downloadThumbnailImage = img => {\n  return client\n    .get(img.url.replace('http://', 'https://'), { responseType: 'blob' })\n    .then(res => res.data)\n    .then(fileToDataURL)\n    .then(dataURL => Object.assign(img, { dataURL }))\n}\n\nconst unsplash = {\n  download(id) {\n    return client.get(`/unsplash/download/${id}`).then(res => res.data)\n  },\n  async random() {\n    const imageUrls = await client.get('/unsplash/random')\n    return Promise.all(imageUrls.data.map(downloadThumbnailImage))\n  },\n}\n\nfunction getSnippet(uid = '', { host, filename } = {}) {\n  return client\n    .get(`/snippets/${uid}`, {\n      baseURL: host ? `https://${host}/api` : undefined,\n      params: { filename },\n    })\n    .then(res => res.data)\n    .catch(e => {\n      console.error(e)\n      return null\n    })\n}\n\nfunction listSnippets(page) {\n  // IDEA: move into axios interceptor\n  return firebase\n    .auth()\n    .currentUser.getIdToken()\n    .then(authorization =>\n      client\n        .get(`/snippets`, {\n          params: {\n            page,\n          },\n          headers: {\n            authorization,\n          },\n        })\n        .then(res => res.data)\n        .catch(e => {\n          console.error(e)\n          throw e\n        })\n    )\n}\n\nfunction isNotDefaultSetting(v, k) {\n  return v === DEFAULT_SETTINGS[k] || !Object.prototype.hasOwnProperty.call(DEFAULT_SETTINGS, k)\n}\n\nfunction updateSnippet(uid, state) {\n  const sanitized = omitBy(state, isNotDefaultSetting)\n\n  const data = {\n    ...sanitized,\n    code: state.code != null ? state.code : DEFAULT_CODE,\n  }\n\n  if (uid) {\n    return client\n      .patch(`/snippets/${uid}`, data)\n      .then(res => res.data)\n      .catch(e => {\n        console.error(e)\n        return null\n      })\n  }\n  return client\n    .post(`/snippets`, data)\n    .then(res => res.data)\n    .catch(e => {\n      console.error(e)\n      return null\n    })\n}\n\nfunction deleteSnippet(uid) {\n  return client\n    .delete(`/snippets/${uid}`)\n    .then(res => res.data)\n    .catch(e => {\n      console.error(e)\n      return null\n    })\n}\n\nconst createSnippet = debounce(data => updateSnippet(null, data), ms('5s'), {\n  leading: true,\n  trailing: false,\n})\n\nexport default {\n  snippet: {\n    get: getSnippet,\n    list: listSnippets,\n    update: debounce(updateSnippet, ms('1s'), { leading: true, trailing: true }),\n    create: createSnippet,\n    delete: id => deleteSnippet(id),\n  },\n  tweet: debounce(tweet, ms('5s'), { leading: true, trailing: false }),\n  image: debounce(image, ms('5s'), { leading: true, trailing: false }),\n  unsplash,\n  downloadThumbnailImage,\n}\n"]},"metadata":{},"sourceType":"module"}