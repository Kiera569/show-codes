{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/limengyu/Desktop/private/code/project/show-codes/components/SelectionEditor.js\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport { useKeyboardListener } from 'actionsack';\nimport Popout from './Popout';\nimport Button from './Button';\nimport ColorPicker from './ColorPicker';\nimport { COLORS } from '../lib/constants';\n\nfunction ModifierButton(props) {\n  return /*#__PURE__*/_jsxDEV(Button, {\n    flex: 0,\n    padding: \"0\",\n    center: true,\n    margin: \"0 8px 0 0\",\n    style: {\n      borderBottom: `1px solid ${props.selected ? 'white' : 'transparent'}`\n    },\n    onClick: props.onClick,\n    color: props.color,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 5\n  }, this);\n}\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'BOLD':\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          bold: !state.bold\n        });\n      }\n\n    case 'ITALICS':\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          italics: !state.italics\n        });\n      }\n\n    case 'UNDERLINE':\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          underline: Number(state.underline + 1) % 3\n        });\n      }\n\n    case 'COLOR':\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          color: action.color\n        });\n      }\n  }\n\n  throw new Error('Invalid action');\n}\n\nfunction SelectionEditor({\n  onChange\n}) {\n  const [open, setOpen] = React.useState(false);\n  useKeyboardListener('Escape', () => setOpen(false));\n  const [state, dispatch] = React.useReducer(reducer, {\n    bold: null,\n    italics: null,\n    underline: null,\n    color: null\n  });\n  React.useEffect(() => {\n    onChange(state);\n  }, [onChange, state]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'relative'\n    },\n    className: _JSXStyle.dynamic([[\"1818633230\", [state.color || COLORS.PRIMARY, `inset 0px 0px 0px ${open ? 2 : 1}px ${COLORS.SECONDARY}`, COLORS.SECONDARY]]]),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: _JSXStyle.dynamic([[\"1818633230\", [state.color || COLORS.PRIMARY, `inset 0px 0px 0px ${open ? 2 : 1}px ${COLORS.SECONDARY}`, COLORS.SECONDARY]]]) + \" \" + \"colorizer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: _JSXStyle.dynamic([[\"1818633230\", [state.color || COLORS.PRIMARY, `inset 0px 0px 0px ${open ? 2 : 1}px ${COLORS.SECONDARY}`, COLORS.SECONDARY]]]) + \" \" + \"modifier\",\n        children: [/*#__PURE__*/_jsxDEV(ModifierButton, {\n          selected: state.bold,\n          onClick: () => dispatch({\n            type: 'BOLD'\n          }),\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            className: _JSXStyle.dynamic([[\"1818633230\", [state.color || COLORS.PRIMARY, `inset 0px 0px 0px ${open ? 2 : 1}px ${COLORS.SECONDARY}`, COLORS.SECONDARY]]]),\n            children: \"B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModifierButton, {\n          selected: state.italics,\n          onClick: () => dispatch({\n            type: 'ITALICS'\n          }),\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: _JSXStyle.dynamic([[\"1818633230\", [state.color || COLORS.PRIMARY, `inset 0px 0px 0px ${open ? 2 : 1}px ${COLORS.SECONDARY}`, COLORS.SECONDARY]]]),\n            children: \"I\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModifierButton, {\n          selected: state.underline,\n          onClick: () => dispatch({\n            type: 'UNDERLINE'\n          }),\n          color: state.underline === 2 ? COLORS.RED : undefined,\n          children: /*#__PURE__*/_jsxDEV(\"u\", {\n            className: _JSXStyle.dynamic([[\"1818633230\", [state.color || COLORS.PRIMARY, `inset 0px 0px 0px ${open ? 2 : 1}px ${COLORS.SECONDARY}`, COLORS.SECONDARY]]]),\n            children: \"U\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setOpen(o => !o),\n          className: _JSXStyle.dynamic([[\"1818633230\", [state.color || COLORS.PRIMARY, `inset 0px 0px 0px ${open ? 2 : 1}px ${COLORS.SECONDARY}`, COLORS.SECONDARY]]]) + \" \" + \"color-square\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Popout, {\n        hidden: !open,\n        pointerLeft: \"16px\",\n        style: {\n          left: 82\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: _JSXStyle.dynamic([[\"1818633230\", [state.color || COLORS.PRIMARY, `inset 0px 0px 0px ${open ? 2 : 1}px ${COLORS.SECONDARY}`, COLORS.SECONDARY]]]) + \" \" + \"color-picker-container\",\n          children: /*#__PURE__*/_jsxDEV(ColorPicker, {\n            color: state.color || COLORS.PRIMARY,\n            disableAlpha: true,\n            onChange: d => dispatch({\n              type: 'COLOR',\n              color: d.hex\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"1818633230\",\n      dynamic: [state.color || COLORS.PRIMARY, `inset 0px 0px 0px ${open ? 2 : 1}px ${COLORS.SECONDARY}`, COLORS.SECONDARY],\n      children: `.modifier.__jsx-style-dynamic-selector{padding:0px 8px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.colorizer.__jsx-style-dynamic-selector b.__jsx-style-dynamic-selector{font-weight:bold;}.colorizer.__jsx-style-dynamic-selector i.__jsx-style-dynamic-selector{font-style:italic;}.colorizer.__jsx-style-dynamic-selector button{min-width:20px;}.color-square.__jsx-style-dynamic-selector{cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:none;border:none;border-radius:3px;padding:12px;margin:4px 0 4px auto;background:${state.color || COLORS.PRIMARY};box-shadow:${`inset 0px 0px 0px ${open ? 2 : 1}px ${COLORS.SECONDARY}`};}.color-picker-container.__jsx-style-dynamic-selector{width:218px;border-top:2px solid ${COLORS.SECONDARY};}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9saW1lbmd5dS9EZXNrdG9wL3ByaXZhdGUvY29kZS9wcm9qZWN0L3Nob3ctY29kZXMvY29tcG9uZW50cy9TZWxlY3Rpb25FZGl0b3IuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBbUdTLEFBRzZCLEFBSUMsQUFHQyxBQUdILEFBR0EsQUFXSCxZQUNzQyxHQWRwRCxBQUdrQixDQWJILENBSWYsQ0FHQSw0Q0FrQkEsY0FYZSxhQUNELENBZGQsV0Flb0Isa0JBQ0wsYUFDUyxzQkFDa0Isd0NBQ0Esd0NBQzFDIiwiZmlsZSI6Ii9Vc2Vycy9saW1lbmd5dS9EZXNrdG9wL3ByaXZhdGUvY29kZS9wcm9qZWN0L3Nob3ctY29kZXMvY29tcG9uZW50cy9TZWxlY3Rpb25FZGl0b3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB1c2VLZXlib2FyZExpc3RlbmVyIH0gZnJvbSAnYWN0aW9uc2FjaydcbmltcG9ydCBQb3BvdXQgZnJvbSAnLi9Qb3BvdXQnXG5pbXBvcnQgQnV0dG9uIGZyb20gJy4vQnV0dG9uJ1xuaW1wb3J0IENvbG9yUGlja2VyIGZyb20gJy4vQ29sb3JQaWNrZXInXG5pbXBvcnQgeyBDT0xPUlMgfSBmcm9tICcuLi9saWIvY29uc3RhbnRzJ1xuXG5mdW5jdGlvbiBNb2RpZmllckJ1dHRvbihwcm9wcykge1xuICByZXR1cm4gKFxuICAgIDxCdXR0b25cbiAgICAgIGZsZXg9ezB9XG4gICAgICBwYWRkaW5nPVwiMFwiXG4gICAgICBjZW50ZXJcbiAgICAgIG1hcmdpbj1cIjAgOHB4IDAgMFwiXG4gICAgICBzdHlsZT17eyBib3JkZXJCb3R0b206IGAxcHggc29saWQgJHtwcm9wcy5zZWxlY3RlZCA/ICd3aGl0ZScgOiAndHJhbnNwYXJlbnQnfWAgfX1cbiAgICAgIG9uQ2xpY2s9e3Byb3BzLm9uQ2xpY2t9XG4gICAgICBjb2xvcj17cHJvcHMuY29sb3J9XG4gICAgPlxuICAgICAge3Byb3BzLmNoaWxkcmVufVxuICAgIDwvQnV0dG9uPlxuICApXG59XG5cbmZ1bmN0aW9uIHJlZHVjZXIoc3RhdGUsIGFjdGlvbikge1xuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSAnQk9MRCc6IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBib2xkOiAhc3RhdGUuYm9sZCxcbiAgICAgIH1cbiAgICB9XG4gICAgY2FzZSAnSVRBTElDUyc6IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBpdGFsaWNzOiAhc3RhdGUuaXRhbGljcyxcbiAgICAgIH1cbiAgICB9XG4gICAgY2FzZSAnVU5ERVJMSU5FJzoge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIHVuZGVybGluZTogTnVtYmVyKHN0YXRlLnVuZGVybGluZSArIDEpICUgMyxcbiAgICAgIH1cbiAgICB9XG4gICAgY2FzZSAnQ09MT1InOiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgY29sb3I6IGFjdGlvbi5jb2xvcixcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFjdGlvbicpXG59XG5cbmZ1bmN0aW9uIFNlbGVjdGlvbkVkaXRvcih7IG9uQ2hhbmdlIH0pIHtcbiAgY29uc3QgW29wZW4sIHNldE9wZW5dID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG5cbiAgdXNlS2V5Ym9hcmRMaXN0ZW5lcignRXNjYXBlJywgKCkgPT4gc2V0T3BlbihmYWxzZSkpXG5cbiAgY29uc3QgW3N0YXRlLCBkaXNwYXRjaF0gPSBSZWFjdC51c2VSZWR1Y2VyKHJlZHVjZXIsIHtcbiAgICBib2xkOiBudWxsLFxuICAgIGl0YWxpY3M6IG51bGwsXG4gICAgdW5kZXJsaW5lOiBudWxsLFxuICAgIGNvbG9yOiBudWxsLFxuICB9KVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgb25DaGFuZ2Uoc3RhdGUpXG4gIH0sIFtvbkNoYW5nZSwgc3RhdGVdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBzdHlsZT17eyBwb3NpdGlvbjogJ3JlbGF0aXZlJyB9fT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sb3JpemVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kaWZpZXJcIj5cbiAgICAgICAgICA8TW9kaWZpZXJCdXR0b24gc2VsZWN0ZWQ9e3N0YXRlLmJvbGR9IG9uQ2xpY2s9eygpID0+IGRpc3BhdGNoKHsgdHlwZTogJ0JPTEQnIH0pfT5cbiAgICAgICAgICAgIDxiPkI8L2I+XG4gICAgICAgICAgPC9Nb2RpZmllckJ1dHRvbj5cbiAgICAgICAgICA8TW9kaWZpZXJCdXR0b24gc2VsZWN0ZWQ9e3N0YXRlLml0YWxpY3N9IG9uQ2xpY2s9eygpID0+IGRpc3BhdGNoKHsgdHlwZTogJ0lUQUxJQ1MnIH0pfT5cbiAgICAgICAgICAgIDxpPkk8L2k+XG4gICAgICAgICAgPC9Nb2RpZmllckJ1dHRvbj5cbiAgICAgICAgICA8TW9kaWZpZXJCdXR0b25cbiAgICAgICAgICAgIHNlbGVjdGVkPXtzdGF0ZS51bmRlcmxpbmV9XG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBkaXNwYXRjaCh7IHR5cGU6ICdVTkRFUkxJTkUnIH0pfVxuICAgICAgICAgICAgY29sb3I9e3N0YXRlLnVuZGVybGluZSA9PT0gMiA/IENPTE9SUy5SRUQgOiB1bmRlZmluZWR9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPHU+VTwvdT5cbiAgICAgICAgICA8L01vZGlmaWVyQnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiY29sb3Itc3F1YXJlXCIgb25DbGljaz17KCkgPT4gc2V0T3BlbihvID0+ICFvKX0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxQb3BvdXQgaGlkZGVuPXshb3Blbn0gcG9pbnRlckxlZnQ9XCIxNnB4XCIgc3R5bGU9e3sgbGVmdDogODIgfX0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2xvci1waWNrZXItY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8Q29sb3JQaWNrZXJcbiAgICAgICAgICAgICAgY29sb3I9e3N0YXRlLmNvbG9yIHx8IENPTE9SUy5QUklNQVJZfVxuICAgICAgICAgICAgICBkaXNhYmxlQWxwaGE9e3RydWV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtkID0+IGRpc3BhdGNoKHsgdHlwZTogJ0NPTE9SJywgY29sb3I6IGQuaGV4IH0pfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9Qb3BvdXQ+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgIHtgXG4gICAgICAgICAgLm1vZGlmaWVyIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDBweCA4cHg7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIH1cbiAgICAgICAgICAuY29sb3JpemVyIGIge1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIC5jb2xvcml6ZXIgaSB7XG4gICAgICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICAgICAgfVxuICAgICAgICAgIC5jb2xvcml6ZXIgOmdsb2JhbChidXR0b24pIHtcbiAgICAgICAgICAgIG1pbi13aWR0aDogMjBweDtcbiAgICAgICAgICB9XG4gICAgICAgICAgLmNvbG9yLXNxdWFyZSB7XG4gICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICBhcHBlYXJhbmNlOiBub25lO1xuICAgICAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgICAgICBtYXJnaW46IDRweCAwIDRweCBhdXRvO1xuICAgICAgICAgICAgYmFja2dyb3VuZDogJHtzdGF0ZS5jb2xvciB8fCBDT0xPUlMuUFJJTUFSWX07XG4gICAgICAgICAgICBib3gtc2hhZG93OiAke2BpbnNldCAwcHggMHB4IDBweCAke29wZW4gPyAyIDogMX1weCAke0NPTE9SUy5TRUNPTkRBUll9YH07XG4gICAgICAgICAgfVxuICAgICAgICAgIC5jb2xvci1waWNrZXItY29udGFpbmVyIHtcbiAgICAgICAgICAgIHdpZHRoOiAyMThweDtcbiAgICAgICAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCAke0NPTE9SUy5TRUNPTkRBUll9O1xuICAgICAgICAgIH1cbiAgICAgICAgYH1cbiAgICAgIDwvc3R5bGU+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VsZWN0aW9uRWRpdG9yXG4iXX0= */\n/*@ sourceURL=/Users/limengyu/Desktop/private/code/project/show-codes/components/SelectionEditor.js */`\n    }, void 0, false, void 0, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n\nexport default SelectionEditor;","map":{"version":3,"sources":["/Users/limengyu/Desktop/private/code/project/show-codes/components/SelectionEditor.js"],"names":["React","useKeyboardListener","Popout","Button","ColorPicker","COLORS","ModifierButton","props","borderBottom","selected","onClick","color","children","reducer","state","action","type","bold","italics","underline","Number","Error","SelectionEditor","onChange","open","setOpen","useState","dispatch","useReducer","useEffect","position","PRIMARY","SECONDARY","RED","undefined","o","left","d","hex"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useKeyboardListener } from 'actionsack'\nimport Popout from './Popout'\nimport Button from './Button'\nimport ColorPicker from './ColorPicker'\nimport { COLORS } from '../lib/constants'\n\nfunction ModifierButton(props) {\n  return (\n    <Button\n      flex={0}\n      padding=\"0\"\n      center\n      margin=\"0 8px 0 0\"\n      style={{ borderBottom: `1px solid ${props.selected ? 'white' : 'transparent'}` }}\n      onClick={props.onClick}\n      color={props.color}\n    >\n      {props.children}\n    </Button>\n  )\n}\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'BOLD': {\n      return {\n        ...state,\n        bold: !state.bold,\n      }\n    }\n    case 'ITALICS': {\n      return {\n        ...state,\n        italics: !state.italics,\n      }\n    }\n    case 'UNDERLINE': {\n      return {\n        ...state,\n        underline: Number(state.underline + 1) % 3,\n      }\n    }\n    case 'COLOR': {\n      return {\n        ...state,\n        color: action.color,\n      }\n    }\n  }\n  throw new Error('Invalid action')\n}\n\nfunction SelectionEditor({ onChange }) {\n  const [open, setOpen] = React.useState(false)\n\n  useKeyboardListener('Escape', () => setOpen(false))\n\n  const [state, dispatch] = React.useReducer(reducer, {\n    bold: null,\n    italics: null,\n    underline: null,\n    color: null,\n  })\n\n  React.useEffect(() => {\n    onChange(state)\n  }, [onChange, state])\n\n  return (\n    <div style={{ position: 'relative' }}>\n      <div className=\"colorizer\">\n        <div className=\"modifier\">\n          <ModifierButton selected={state.bold} onClick={() => dispatch({ type: 'BOLD' })}>\n            <b>B</b>\n          </ModifierButton>\n          <ModifierButton selected={state.italics} onClick={() => dispatch({ type: 'ITALICS' })}>\n            <i>I</i>\n          </ModifierButton>\n          <ModifierButton\n            selected={state.underline}\n            onClick={() => dispatch({ type: 'UNDERLINE' })}\n            color={state.underline === 2 ? COLORS.RED : undefined}\n          >\n            <u>U</u>\n          </ModifierButton>\n          <button className=\"color-square\" onClick={() => setOpen(o => !o)} />\n        </div>\n        <Popout hidden={!open} pointerLeft=\"16px\" style={{ left: 82 }}>\n          <div className=\"color-picker-container\">\n            <ColorPicker\n              color={state.color || COLORS.PRIMARY}\n              disableAlpha={true}\n              onChange={d => dispatch({ type: 'COLOR', color: d.hex })}\n            />\n          </div>\n        </Popout>\n      </div>\n      <style jsx>\n        {`\n          .modifier {\n            padding: 0px 8px;\n            display: flex;\n          }\n          .colorizer b {\n            font-weight: bold;\n          }\n          .colorizer i {\n            font-style: italic;\n          }\n          .colorizer :global(button) {\n            min-width: 20px;\n          }\n          .color-square {\n            cursor: pointer;\n            appearance: none;\n            outline: none;\n            border: none;\n            border-radius: 3px;\n            padding: 12px;\n            margin: 4px 0 4px auto;\n            background: ${state.color || COLORS.PRIMARY};\n            box-shadow: ${`inset 0px 0px 0px ${open ? 2 : 1}px ${COLORS.SECONDARY}`};\n          }\n          .color-picker-container {\n            width: 218px;\n            border-top: 2px solid ${COLORS.SECONDARY};\n          }\n        `}\n      </style>\n    </div>\n  )\n}\n\nexport default SelectionEditor\n"]},"metadata":{},"sourceType":"module"}