{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/limengyu/Desktop/private/code/project/show-codes/components/CopyMenu.js\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport { useRouter } from 'next/router';\nimport { useCopyTextHandler, useAsyncCallback, useKeyboardListener } from 'actionsack';\nimport morph from 'morphmorph';\nimport { COLORS } from '../lib/constants';\nimport Button from './Button';\nimport Popout, { managePopout } from './Popout';\nimport CopySVG from './svg/Copy';\n\nconst toIFrame = (url, width, height) => `<iframe\n  src=\"${location.origin}/embed${url.replace(/^\\/\\?/, '?')}\"\n  style=\"width: ${width || 1024}px; height: ${height || 473}px; border:0; transform: scale(1); overflow:hidden;\"\n  sandbox=\"allow-scripts allow-same-origin\">\n</iframe>\n`;\n\nconst toURL = url => `${location.origin}${url}`; // Medium does not handle asterisks correctly - https://github.com/carbon-app/carbon/issues/1067\n\n\nconst replaceAsterisks = string => string.replace(/\\*/g, '%2A');\n\nconst toEncodedURL = morph.compose(encodeURI, replaceAsterisks, toURL);\n\nfunction CopyButton(props) {\n  return /*#__PURE__*/_jsxDEV(Button, _objectSpread(_objectSpread({}, props), {}, {\n    hoverColor: COLORS.SECONDARY,\n    color: \"rgba(255, 255, 255, 0.7)\",\n    padding: \"8px\"\n  }), void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n}\n\nfunction CopyEmbed({\n  mapper,\n  title\n}) {\n  const {\n    asPath\n  } = useRouter();\n  const text = React.useMemo(() => mapper(asPath), [mapper, asPath]);\n  const {\n    onClick,\n    copied\n  } = useCopyTextHandler(text);\n  return /*#__PURE__*/_jsxDEV(CopyButton, {\n    onClick: onClick,\n    children: copied ? 'Copied!' : title\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 10\n  }, this);\n}\n\nconst popoutStyle = {\n  width: '140px',\n  right: 0\n};\n\nfunction useClipboardSupport() {\n  const [isClipboardSupported, setClipboardSupport] = React.useState(false);\n  React.useEffect(() => {\n    setClipboardSupport(window.navigator && window.navigator.clipboard && typeof ClipboardItem === 'function');\n  }, []);\n  return isClipboardSupported;\n}\n\nfunction CopyMenu({\n  isVisible,\n  toggleVisibility,\n  copyImage,\n  carbonRef\n}) {\n  const clipboardSupported = useClipboardSupport();\n  const [showCopied, {\n    loading: copied\n  }] = useAsyncCallback(() => new Promise(res => setTimeout(res, 1000)));\n  const [copy, {\n    loading\n  }] = useAsyncCallback(async (...args) => {\n    if (clipboardSupported) {\n      await copyImage(...args);\n      showCopied();\n    }\n  });\n  useKeyboardListener('⌘-⇧-c', e => {\n    e.preventDefault();\n    copy(e);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: _JSXStyle.dynamic([[\"832033494\", [COLORS.SECONDARY, COLORS.SECONDARY, COLORS.SECONDARY]]]) + \" \" + \"copy-menu-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: _JSXStyle.dynamic([[\"832033494\", [COLORS.SECONDARY, COLORS.SECONDARY, COLORS.SECONDARY]]]) + \" \" + \"flex\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        center: true,\n        border: true,\n        large: true,\n        padding: \"0 16px\",\n        margin: \"0 8px 0 0\",\n        onClick: toggleVisibility,\n        color: COLORS.SECONDARY,\n        title: \"Copy menu\",\n        children: /*#__PURE__*/_jsxDEV(CopySVG, {\n          size: 16,\n          color: COLORS.SECONDARY\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Popout, {\n      hidden: !isVisible,\n      borderColor: COLORS.SECONDARY,\n      pointerRight: \"24px\",\n      style: popoutStyle,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: _JSXStyle.dynamic([[\"832033494\", [COLORS.SECONDARY, COLORS.SECONDARY, COLORS.SECONDARY]]]) + \" \" + \"copy-row flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: _JSXStyle.dynamic([[\"832033494\", [COLORS.SECONDARY, COLORS.SECONDARY, COLORS.SECONDARY]]]),\n          children: \"Copy to clipboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), clipboardSupported && /*#__PURE__*/_jsxDEV(CopyButton, {\n          id: \"export-clipboard\",\n          onClick: copy,\n          disabled: loading,\n          children: loading ? 'Copying…' : copied ? 'Copied!' : 'Image'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CopyEmbed, {\n          title: \"Medium.com\",\n          mapper: toEncodedURL\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CopyEmbed, {\n          title: \"IFrame\",\n          mapper: url => toIFrame(url, carbonRef.clientWidth, carbonRef.clientHeight)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CopyEmbed, {\n          title: \"Plain URL\",\n          mapper: toURL\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"832033494\",\n      dynamic: [COLORS.SECONDARY, COLORS.SECONDARY, COLORS.SECONDARY],\n      children: `.copy-menu-container.__jsx-style-dynamic-selector{position:relative;color:${COLORS.SECONDARY};-webkit-flex:1;-ms-flex:1;flex:1;}.copy-row.__jsx-style-dynamic-selector{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;border-bottom:1px solid ${COLORS.SECONDARY};}.copy-row.__jsx-style-dynamic-selector button{border-top:1px solid ${COLORS.SECONDARY};}.copy-row.__jsx-style-dynamic-selector>span.__jsx-style-dynamic-selector{padding:8px;margin:0 auto;}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9saW1lbmd5dS9EZXNrdG9wL3ByaXZhdGUvY29kZS9wcm9qZWN0L3Nob3ctY29kZXMvY29tcG9uZW50cy9Db3B5TWVudS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFtSFMsQUFHK0IsQUFNSSxBQU00QixBQUl0QyxZQUNFLE1BaEJxQixRQWlCckMsd0JBTEEsR0FYUyx5QkFLdUIsUUFKaEMsMkdBS3VELHFEQUN2RCIsImZpbGUiOiIvVXNlcnMvbGltZW5neXUvRGVza3RvcC9wcml2YXRlL2NvZGUvcHJvamVjdC9zaG93LWNvZGVzL2NvbXBvbmVudHMvQ29weU1lbnUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICduZXh0L3JvdXRlcidcbmltcG9ydCB7IHVzZUNvcHlUZXh0SGFuZGxlciwgdXNlQXN5bmNDYWxsYmFjaywgdXNlS2V5Ym9hcmRMaXN0ZW5lciB9IGZyb20gJ2FjdGlvbnNhY2snXG5pbXBvcnQgbW9ycGggZnJvbSAnbW9ycGhtb3JwaCdcblxuaW1wb3J0IHsgQ09MT1JTIH0gZnJvbSAnLi4vbGliL2NvbnN0YW50cydcbmltcG9ydCBCdXR0b24gZnJvbSAnLi9CdXR0b24nXG5pbXBvcnQgUG9wb3V0LCB7IG1hbmFnZVBvcG91dCB9IGZyb20gJy4vUG9wb3V0J1xuaW1wb3J0IENvcHlTVkcgZnJvbSAnLi9zdmcvQ29weSdcblxuY29uc3QgdG9JRnJhbWUgPSAodXJsLCB3aWR0aCwgaGVpZ2h0KSA9PlxuICBgPGlmcmFtZVxuICBzcmM9XCIke2xvY2F0aW9uLm9yaWdpbn0vZW1iZWQke3VybC5yZXBsYWNlKC9eXFwvXFw/LywgJz8nKX1cIlxuICBzdHlsZT1cIndpZHRoOiAke3dpZHRoIHx8IDEwMjR9cHg7IGhlaWdodDogJHtcbiAgICBoZWlnaHQgfHwgNDczXG4gIH1weDsgYm9yZGVyOjA7IHRyYW5zZm9ybTogc2NhbGUoMSk7IG92ZXJmbG93OmhpZGRlbjtcIlxuICBzYW5kYm94PVwiYWxsb3ctc2NyaXB0cyBhbGxvdy1zYW1lLW9yaWdpblwiPlxuPC9pZnJhbWU+XG5gXG5cbmNvbnN0IHRvVVJMID0gdXJsID0+IGAke2xvY2F0aW9uLm9yaWdpbn0ke3VybH1gXG4vLyBNZWRpdW0gZG9lcyBub3QgaGFuZGxlIGFzdGVyaXNrcyBjb3JyZWN0bHkgLSBodHRwczovL2dpdGh1Yi5jb20vY2FyYm9uLWFwcC9jYXJib24vaXNzdWVzLzEwNjdcbmNvbnN0IHJlcGxhY2VBc3Rlcmlza3MgPSBzdHJpbmcgPT4gc3RyaW5nLnJlcGxhY2UoL1xcKi9nLCAnJTJBJylcbmNvbnN0IHRvRW5jb2RlZFVSTCA9IG1vcnBoLmNvbXBvc2UoZW5jb2RlVVJJLCByZXBsYWNlQXN0ZXJpc2tzLCB0b1VSTClcblxuZnVuY3Rpb24gQ29weUJ1dHRvbihwcm9wcykge1xuICByZXR1cm4gKFxuICAgIDxCdXR0b25cbiAgICAgIHsuLi5wcm9wc31cbiAgICAgIGhvdmVyQ29sb3I9e0NPTE9SUy5TRUNPTkRBUll9XG4gICAgICBjb2xvcj1cInJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KVwiXG4gICAgICBwYWRkaW5nPVwiOHB4XCJcbiAgICAvPlxuICApXG59XG5cbmZ1bmN0aW9uIENvcHlFbWJlZCh7IG1hcHBlciwgdGl0bGUgfSkge1xuICBjb25zdCB7IGFzUGF0aCB9ID0gdXNlUm91dGVyKClcbiAgY29uc3QgdGV4dCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gbWFwcGVyKGFzUGF0aCksIFttYXBwZXIsIGFzUGF0aF0pXG4gIGNvbnN0IHsgb25DbGljaywgY29waWVkIH0gPSB1c2VDb3B5VGV4dEhhbmRsZXIodGV4dClcblxuICByZXR1cm4gPENvcHlCdXR0b24gb25DbGljaz17b25DbGlja30+e2NvcGllZCA/ICdDb3BpZWQhJyA6IHRpdGxlfTwvQ29weUJ1dHRvbj5cbn1cblxuY29uc3QgcG9wb3V0U3R5bGUgPSB7IHdpZHRoOiAnMTQwcHgnLCByaWdodDogMCB9XG5cbmZ1bmN0aW9uIHVzZUNsaXBib2FyZFN1cHBvcnQoKSB7XG4gIGNvbnN0IFtpc0NsaXBib2FyZFN1cHBvcnRlZCwgc2V0Q2xpcGJvYXJkU3VwcG9ydF0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldENsaXBib2FyZFN1cHBvcnQoXG4gICAgICB3aW5kb3cubmF2aWdhdG9yICYmIHdpbmRvdy5uYXZpZ2F0b3IuY2xpcGJvYXJkICYmIHR5cGVvZiBDbGlwYm9hcmRJdGVtID09PSAnZnVuY3Rpb24nXG4gICAgKVxuICB9LCBbXSlcblxuICByZXR1cm4gaXNDbGlwYm9hcmRTdXBwb3J0ZWRcbn1cblxuZnVuY3Rpb24gQ29weU1lbnUoeyBpc1Zpc2libGUsIHRvZ2dsZVZpc2liaWxpdHksIGNvcHlJbWFnZSwgY2FyYm9uUmVmIH0pIHtcbiAgY29uc3QgY2xpcGJvYXJkU3VwcG9ydGVkID0gdXNlQ2xpcGJvYXJkU3VwcG9ydCgpXG5cbiAgY29uc3QgW3Nob3dDb3BpZWQsIHsgbG9hZGluZzogY29waWVkIH1dID0gdXNlQXN5bmNDYWxsYmFjayhcbiAgICAoKSA9PiBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDEwMDApKVxuICApXG5cbiAgY29uc3QgW2NvcHksIHsgbG9hZGluZyB9XSA9IHVzZUFzeW5jQ2FsbGJhY2soYXN5bmMgKC4uLmFyZ3MpID0+IHtcbiAgICBpZiAoY2xpcGJvYXJkU3VwcG9ydGVkKSB7XG4gICAgICBhd2FpdCBjb3B5SW1hZ2UoLi4uYXJncylcbiAgICAgIHNob3dDb3BpZWQoKVxuICAgIH1cbiAgfSlcblxuICB1c2VLZXlib2FyZExpc3RlbmVyKCfijJgt4oenLWMnLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBjb3B5KGUpXG4gIH0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImNvcHktbWVudS1jb250YWluZXJcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleFwiPlxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgY2VudGVyXG4gICAgICAgICAgYm9yZGVyXG4gICAgICAgICAgbGFyZ2VcbiAgICAgICAgICBwYWRkaW5nPVwiMCAxNnB4XCJcbiAgICAgICAgICBtYXJnaW49XCIwIDhweCAwIDBcIlxuICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZVZpc2liaWxpdHl9XG4gICAgICAgICAgY29sb3I9e0NPTE9SUy5TRUNPTkRBUll9XG4gICAgICAgICAgdGl0bGU9XCJDb3B5IG1lbnVcIlxuICAgICAgICA+XG4gICAgICAgICAgPENvcHlTVkcgc2l6ZT17MTZ9IGNvbG9yPXtDT0xPUlMuU0VDT05EQVJZfSAvPlxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPFBvcG91dFxuICAgICAgICBoaWRkZW49eyFpc1Zpc2libGV9XG4gICAgICAgIGJvcmRlckNvbG9yPXtDT0xPUlMuU0VDT05EQVJZfVxuICAgICAgICBwb2ludGVyUmlnaHQ9XCIyNHB4XCJcbiAgICAgICAgc3R5bGU9e3BvcG91dFN0eWxlfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvcHktcm93IGZsZXhcIj5cbiAgICAgICAgICA8c3Bhbj5Db3B5IHRvIGNsaXBib2FyZDwvc3Bhbj5cbiAgICAgICAgICB7Y2xpcGJvYXJkU3VwcG9ydGVkICYmIChcbiAgICAgICAgICAgIDxDb3B5QnV0dG9uIGlkPVwiZXhwb3J0LWNsaXBib2FyZFwiIG9uQ2xpY2s9e2NvcHl9IGRpc2FibGVkPXtsb2FkaW5nfT5cbiAgICAgICAgICAgICAge2xvYWRpbmcgPyAnQ29weWluZ+KApicgOiBjb3BpZWQgPyAnQ29waWVkIScgOiAnSW1hZ2UnfVxuICAgICAgICAgICAgPC9Db3B5QnV0dG9uPlxuICAgICAgICAgICl9XG4gICAgICAgICAgPENvcHlFbWJlZCB0aXRsZT1cIk1lZGl1bS5jb21cIiBtYXBwZXI9e3RvRW5jb2RlZFVSTH0gLz5cbiAgICAgICAgICA8Q29weUVtYmVkXG4gICAgICAgICAgICB0aXRsZT1cIklGcmFtZVwiXG4gICAgICAgICAgICBtYXBwZXI9e3VybCA9PiB0b0lGcmFtZSh1cmwsIGNhcmJvblJlZi5jbGllbnRXaWR0aCwgY2FyYm9uUmVmLmNsaWVudEhlaWdodCl9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8Q29weUVtYmVkIHRpdGxlPVwiUGxhaW4gVVJMXCIgbWFwcGVyPXt0b1VSTH0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L1BvcG91dD5cbiAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgIHtgXG4gICAgICAgICAgLmNvcHktbWVudS1jb250YWluZXIge1xuICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgY29sb3I6ICR7Q09MT1JTLlNFQ09OREFSWX07XG4gICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC5jb3B5LXJvdyB7XG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICR7Q09MT1JTLlNFQ09OREFSWX07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLmNvcHktcm93IDpnbG9iYWwoYnV0dG9uKSB7XG4gICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgJHtDT0xPUlMuU0VDT05EQVJZfTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAuY29weS1yb3cgPiBzcGFuIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgICAgIH1cbiAgICAgICAgYH1cbiAgICAgIDwvc3R5bGU+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgbWFuYWdlUG9wb3V0KFJlYWN0Lm1lbW8oQ29weU1lbnUpKVxuIl19 */\n/*@ sourceURL=/Users/limengyu/Desktop/private/code/project/show-codes/components/CopyMenu.js */`\n    }, void 0, false, void 0, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n\nexport default managePopout( /*#__PURE__*/React.memo(CopyMenu));","map":{"version":3,"sources":["/Users/limengyu/Desktop/private/code/project/show-codes/components/CopyMenu.js"],"names":["React","useRouter","useCopyTextHandler","useAsyncCallback","useKeyboardListener","morph","COLORS","Button","Popout","managePopout","CopySVG","toIFrame","url","width","height","location","origin","replace","toURL","replaceAsterisks","string","toEncodedURL","compose","encodeURI","CopyButton","props","SECONDARY","CopyEmbed","mapper","title","asPath","text","useMemo","onClick","copied","popoutStyle","right","useClipboardSupport","isClipboardSupported","setClipboardSupport","useState","useEffect","window","navigator","clipboard","ClipboardItem","CopyMenu","isVisible","toggleVisibility","copyImage","carbonRef","clipboardSupported","showCopied","loading","Promise","res","setTimeout","copy","args","e","preventDefault","clientWidth","clientHeight","memo"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,kBAAT,EAA6BC,gBAA7B,EAA+CC,mBAA/C,QAA0E,YAA1E;AACA,OAAOC,KAAP,MAAkB,YAAlB;AAEA,SAASC,MAAT,QAAuB,kBAAvB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,MAAP,IAAiBC,YAAjB,QAAqC,UAArC;AACA,OAAOC,OAAP,MAAoB,YAApB;;AAEA,MAAMC,QAAQ,GAAG,CAACC,GAAD,EAAMC,KAAN,EAAaC,MAAb,KACd;AACH,SAASC,QAAQ,CAACC,MAAO,SAAQJ,GAAG,CAACK,OAAJ,CAAY,OAAZ,EAAqB,GAArB,CAA0B;AAC3D,kBAAkBJ,KAAK,IAAI,IAAK,eAC5BC,MAAM,IAAI,GACX;AACH;AACA;AACA,CARA;;AAUA,MAAMI,KAAK,GAAGN,GAAG,IAAK,GAAEG,QAAQ,CAACC,MAAO,GAAEJ,GAAI,EAA9C,C,CACA;;;AACA,MAAMO,gBAAgB,GAAGC,MAAM,IAAIA,MAAM,CAACH,OAAP,CAAe,KAAf,EAAsB,KAAtB,CAAnC;;AACA,MAAMI,YAAY,GAAGhB,KAAK,CAACiB,OAAN,CAAcC,SAAd,EAAyBJ,gBAAzB,EAA2CD,KAA3C,CAArB;;AAEA,SAASM,UAAT,CAAoBC,KAApB,EAA2B;AACzB,sBACE,QAAC,MAAD,kCACMA,KADN;AAEE,IAAA,UAAU,EAAEnB,MAAM,CAACoB,SAFrB;AAGE,IAAA,KAAK,EAAC,0BAHR;AAIE,IAAA,OAAO,EAAC;AAJV;AAAA;AAAA;AAAA;AAAA,UADF;AAQD;;AAED,SAASC,SAAT,CAAmB;AAAEC,EAAAA,MAAF;AAAUC,EAAAA;AAAV,CAAnB,EAAsC;AACpC,QAAM;AAAEC,IAAAA;AAAF,MAAa7B,SAAS,EAA5B;AACA,QAAM8B,IAAI,GAAG/B,KAAK,CAACgC,OAAN,CAAc,MAAMJ,MAAM,CAACE,MAAD,CAA1B,EAAoC,CAACF,MAAD,EAASE,MAAT,CAApC,CAAb;AACA,QAAM;AAAEG,IAAAA,OAAF;AAAWC,IAAAA;AAAX,MAAsBhC,kBAAkB,CAAC6B,IAAD,CAA9C;AAEA,sBAAO,QAAC,UAAD;AAAY,IAAA,OAAO,EAAEE,OAArB;AAAA,cAA+BC,MAAM,GAAG,SAAH,GAAeL;AAApD;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;;AAED,MAAMM,WAAW,GAAG;AAAEtB,EAAAA,KAAK,EAAE,OAAT;AAAkBuB,EAAAA,KAAK,EAAE;AAAzB,CAApB;;AAEA,SAASC,mBAAT,GAA+B;AAC7B,QAAM,CAACC,oBAAD,EAAuBC,mBAAvB,IAA8CvC,KAAK,CAACwC,QAAN,CAAe,KAAf,CAApD;AAEAxC,EAAAA,KAAK,CAACyC,SAAN,CAAgB,MAAM;AACpBF,IAAAA,mBAAmB,CACjBG,MAAM,CAACC,SAAP,IAAoBD,MAAM,CAACC,SAAP,CAAiBC,SAArC,IAAkD,OAAOC,aAAP,KAAyB,UAD1D,CAAnB;AAGD,GAJD,EAIG,EAJH;AAMA,SAAOP,oBAAP;AACD;;AAED,SAASQ,QAAT,CAAkB;AAAEC,EAAAA,SAAF;AAAaC,EAAAA,gBAAb;AAA+BC,EAAAA,SAA/B;AAA0CC,EAAAA;AAA1C,CAAlB,EAAyE;AACvE,QAAMC,kBAAkB,GAAGd,mBAAmB,EAA9C;AAEA,QAAM,CAACe,UAAD,EAAa;AAAEC,IAAAA,OAAO,EAAEnB;AAAX,GAAb,IAAoC/B,gBAAgB,CACxD,MAAM,IAAImD,OAAJ,CAAYC,GAAG,IAAIC,UAAU,CAACD,GAAD,EAAM,IAAN,CAA7B,CADkD,CAA1D;AAIA,QAAM,CAACE,IAAD,EAAO;AAAEJ,IAAAA;AAAF,GAAP,IAAsBlD,gBAAgB,CAAC,OAAO,GAAGuD,IAAV,KAAmB;AAC9D,QAAIP,kBAAJ,EAAwB;AACtB,YAAMF,SAAS,CAAC,GAAGS,IAAJ,CAAf;AACAN,MAAAA,UAAU;AACX;AACF,GAL2C,CAA5C;AAOAhD,EAAAA,mBAAmB,CAAC,OAAD,EAAUuD,CAAC,IAAI;AAChCA,IAAAA,CAAC,CAACC,cAAF;AACAH,IAAAA,IAAI,CAACE,CAAD,CAAJ;AACD,GAHkB,CAAnB;AAKA,sBACE;AAAA,iDAwCiBrD,MAAM,CAACoB,SAxCxB,EA+CmCpB,MAAM,CAACoB,SA/C1C,EAmDgCpB,MAAM,CAACoB,SAnDvC,aAAe,qBAAf;AAAA,4BACE;AAAA,mDAuCepB,MAAM,CAACoB,SAvCtB,EA8CiCpB,MAAM,CAACoB,SA9CxC,EAkD8BpB,MAAM,CAACoB,SAlDrC,aAAe,MAAf;AAAA,6BACE,QAAC,MAAD;AACE,QAAA,MAAM,MADR;AAEE,QAAA,MAAM,MAFR;AAGE,QAAA,KAAK,MAHP;AAIE,QAAA,OAAO,EAAC,QAJV;AAKE,QAAA,MAAM,EAAC,WALT;AAME,QAAA,OAAO,EAAEsB,gBANX;AAOE,QAAA,KAAK,EAAE1C,MAAM,CAACoB,SAPhB;AAQE,QAAA,KAAK,EAAC,WARR;AAAA,+BAUE,QAAC,OAAD;AAAS,UAAA,IAAI,EAAE,EAAf;AAAmB,UAAA,KAAK,EAAEpB,MAAM,CAACoB;AAAjC;AAAA;AAAA;AAAA;AAAA;AAVF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,eAeE,QAAC,MAAD;AACE,MAAA,MAAM,EAAE,CAACqB,SADX;AAEE,MAAA,WAAW,EAAEzC,MAAM,CAACoB,SAFtB;AAGE,MAAA,YAAY,EAAC,MAHf;AAIE,MAAA,KAAK,EAAES,WAJT;AAAA,6BAME;AAAA,qDAmBa7B,MAAM,CAACoB,SAnBpB,EA0B+BpB,MAAM,CAACoB,SA1BtC,EA8B4BpB,MAAM,CAACoB,SA9BnC,aAAe,eAAf;AAAA,gCACE;AAAA,uDAkBWpB,MAAM,CAACoB,SAlBlB,EAyB6BpB,MAAM,CAACoB,SAzBpC,EA6B0BpB,MAAM,CAACoB,SA7BjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEGyB,kBAAkB,iBACjB,QAAC,UAAD;AAAY,UAAA,EAAE,EAAC,kBAAf;AAAkC,UAAA,OAAO,EAAEM,IAA3C;AAAiD,UAAA,QAAQ,EAAEJ,OAA3D;AAAA,oBACGA,OAAO,GAAG,UAAH,GAAgBnB,MAAM,GAAG,SAAH,GAAe;AAD/C;AAAA;AAAA;AAAA;AAAA,gBAHJ,eAOE,QAAC,SAAD;AAAW,UAAA,KAAK,EAAC,YAAjB;AAA8B,UAAA,MAAM,EAAEb;AAAtC;AAAA;AAAA;AAAA;AAAA,gBAPF,eAQE,QAAC,SAAD;AACE,UAAA,KAAK,EAAC,QADR;AAEE,UAAA,MAAM,EAAET,GAAG,IAAID,QAAQ,CAACC,GAAD,EAAMsC,SAAS,CAACW,WAAhB,EAA6BX,SAAS,CAACY,YAAvC;AAFzB;AAAA;AAAA;AAAA;AAAA,gBARF,eAYE,QAAC,SAAD;AAAW,UAAA,KAAK,EAAC,WAAjB;AAA6B,UAAA,MAAM,EAAE5C;AAArC;AAAA;AAAA;AAAA;AAAA,gBAZF;AAAA;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,YAfF;AAAA;AAAA,gBAwCiBZ,MAAM,CAACoB,SAxCxB,EA+CmCpB,MAAM,CAACoB,SA/C1C,EAmDgCpB,MAAM,CAACoB,SAnDvC;AAAA,6FAwCiBpB,MAAM,CAACoB,SAxCxB,sSA+CmCpB,MAAM,CAACoB,SA/C1C,wEAmDgCpB,MAAM,CAACoB,SAnDvC;AACJ;AACA;AAFI;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA+DD;;AAED,eAAejB,YAAY,eAACT,KAAK,CAAC+D,IAAN,CAAWjB,QAAX,CAAD,CAA3B","sourcesContent":["import React from 'react'\nimport { useRouter } from 'next/router'\nimport { useCopyTextHandler, useAsyncCallback, useKeyboardListener } from 'actionsack'\nimport morph from 'morphmorph'\n\nimport { COLORS } from '../lib/constants'\nimport Button from './Button'\nimport Popout, { managePopout } from './Popout'\nimport CopySVG from './svg/Copy'\n\nconst toIFrame = (url, width, height) =>\n  `<iframe\n  src=\"${location.origin}/embed${url.replace(/^\\/\\?/, '?')}\"\n  style=\"width: ${width || 1024}px; height: ${\n    height || 473\n  }px; border:0; transform: scale(1); overflow:hidden;\"\n  sandbox=\"allow-scripts allow-same-origin\">\n</iframe>\n`\n\nconst toURL = url => `${location.origin}${url}`\n// Medium does not handle asterisks correctly - https://github.com/carbon-app/carbon/issues/1067\nconst replaceAsterisks = string => string.replace(/\\*/g, '%2A')\nconst toEncodedURL = morph.compose(encodeURI, replaceAsterisks, toURL)\n\nfunction CopyButton(props) {\n  return (\n    <Button\n      {...props}\n      hoverColor={COLORS.SECONDARY}\n      color=\"rgba(255, 255, 255, 0.7)\"\n      padding=\"8px\"\n    />\n  )\n}\n\nfunction CopyEmbed({ mapper, title }) {\n  const { asPath } = useRouter()\n  const text = React.useMemo(() => mapper(asPath), [mapper, asPath])\n  const { onClick, copied } = useCopyTextHandler(text)\n\n  return <CopyButton onClick={onClick}>{copied ? 'Copied!' : title}</CopyButton>\n}\n\nconst popoutStyle = { width: '140px', right: 0 }\n\nfunction useClipboardSupport() {\n  const [isClipboardSupported, setClipboardSupport] = React.useState(false)\n\n  React.useEffect(() => {\n    setClipboardSupport(\n      window.navigator && window.navigator.clipboard && typeof ClipboardItem === 'function'\n    )\n  }, [])\n\n  return isClipboardSupported\n}\n\nfunction CopyMenu({ isVisible, toggleVisibility, copyImage, carbonRef }) {\n  const clipboardSupported = useClipboardSupport()\n\n  const [showCopied, { loading: copied }] = useAsyncCallback(\n    () => new Promise(res => setTimeout(res, 1000))\n  )\n\n  const [copy, { loading }] = useAsyncCallback(async (...args) => {\n    if (clipboardSupported) {\n      await copyImage(...args)\n      showCopied()\n    }\n  })\n\n  useKeyboardListener('⌘-⇧-c', e => {\n    e.preventDefault()\n    copy(e)\n  })\n\n  return (\n    <div className=\"copy-menu-container\">\n      <div className=\"flex\">\n        <Button\n          center\n          border\n          large\n          padding=\"0 16px\"\n          margin=\"0 8px 0 0\"\n          onClick={toggleVisibility}\n          color={COLORS.SECONDARY}\n          title=\"Copy menu\"\n        >\n          <CopySVG size={16} color={COLORS.SECONDARY} />\n        </Button>\n      </div>\n      <Popout\n        hidden={!isVisible}\n        borderColor={COLORS.SECONDARY}\n        pointerRight=\"24px\"\n        style={popoutStyle}\n      >\n        <div className=\"copy-row flex\">\n          <span>Copy to clipboard</span>\n          {clipboardSupported && (\n            <CopyButton id=\"export-clipboard\" onClick={copy} disabled={loading}>\n              {loading ? 'Copying…' : copied ? 'Copied!' : 'Image'}\n            </CopyButton>\n          )}\n          <CopyEmbed title=\"Medium.com\" mapper={toEncodedURL} />\n          <CopyEmbed\n            title=\"IFrame\"\n            mapper={url => toIFrame(url, carbonRef.clientWidth, carbonRef.clientHeight)}\n          />\n          <CopyEmbed title=\"Plain URL\" mapper={toURL} />\n        </div>\n      </Popout>\n      <style jsx>\n        {`\n          .copy-menu-container {\n            position: relative;\n            color: ${COLORS.SECONDARY};\n            flex: 1;\n          }\n\n          .copy-row {\n            flex-direction: column;\n            justify-content: space-between;\n            border-bottom: 1px solid ${COLORS.SECONDARY};\n          }\n\n          .copy-row :global(button) {\n            border-top: 1px solid ${COLORS.SECONDARY};\n          }\n\n          .copy-row > span {\n            padding: 8px;\n            margin: 0 auto;\n          }\n        `}\n      </style>\n    </div>\n  )\n}\n\nexport default managePopout(React.memo(CopyMenu))\n"]},"metadata":{},"sourceType":"module"}